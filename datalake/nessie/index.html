<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Welcome to Shaun's rabbit hole. This site serves as a personal knowledge base for me to record my thoughts and ideas. It is also a place for me to share my knowledge and experience with the world. I hope you find something useful here."><meta name=author content=Eamon><link href=https://bodani.github.io/docs/datalake/nessie/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.3"><title>Nessie - TeaLabs</title><link rel=stylesheet href=../../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><link rel=stylesheet href=../../custom-style/custom-styles.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=TeaLabs class="md-header__button md-logo" aria-label=TeaLabs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TeaLabs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Nessie </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=deep_orange aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../mysql/ class=md-tabs__link> MYSQL </a> </li> <li class=md-tabs__item> <a href=../../postgres/ class=md-tabs__link> PostgreSQL </a> </li> <li class=md-tabs__item> <a href=../../middleware/ class=md-tabs__link> 中间件 </a> </li> <li class=md-tabs__item> <a href=../../kubernetes/sts_update/ class=md-tabs__link> 容器 </a> </li> <li class=md-tabs__item> <a href=../../linux/ class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../postgres/maintenance/thinking_in_db_fd/ class=md-tabs__link> 数据库思考 </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=TeaLabs class="md-nav__button md-logo" aria-label=TeaLabs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> TeaLabs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../../mysql/ class="md-nav__link "> <span class=md-ellipsis> MYSQL </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> MYSQL </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mysql/install/ class=md-nav__link> <span class=md-ellipsis> 安装 </span> </a> </li> <li class=md-nav__item> <a href=../../mysql/config/ class=md-nav__link> <span class=md-ellipsis> 配置 </span> </a> </li> <li class=md-nav__item> <a href=../../mysql/PrivilegeManagement/ class=md-nav__link> <span class=md-ellipsis> 权限管理 </span> </a> </li> <li class=md-nav__item> <a href=../../mysql/users/ class=md-nav__link> <span class=md-ellipsis> 用户管理 </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_6> <div class="md-nav__link md-nav__container"> <a href=../../mysql/replication/ class="md-nav__link "> <span class=md-ellipsis> 主从复制 </span> </a> <label class="md-nav__link " for=__nav_1_6 id=__nav_1_6_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_6_label aria-expanded=false> <label class=md-nav__title for=__nav_1_6> <span class="md-nav__icon md-icon"></span> 主从复制 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mysql/replication/replication/ class=md-nav__link> <span class=md-ellipsis> 异步复制 </span> </a> </li> <li class=md-nav__item> <a href=../../mysql/replication/semisync/ class=md-nav__link> <span class=md-ellipsis> 半同步复制 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_7> <label class=md-nav__link for=__nav_1_7 id=__nav_1_7_label tabindex> <span class=md-ellipsis> 高可用 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_7_label aria-expanded=false> <label class=md-nav__title for=__nav_1_7> <span class="md-nav__icon md-icon"></span> 高可用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mysql/MGR/ class=md-nav__link> <span class=md-ellipsis> 组复制 </span> </a> </li> <li class=md-nav__item> <a href=../../mysql/myshellMGR/ class=md-nav__link> <span class=md-ellipsis> mysqlsh </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_8> <label class=md-nav__link for=__nav_1_8 id=__nav_1_8_label tabindex> <span class=md-ellipsis> 监控 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_8_label aria-expanded=false> <label class=md-nav__title for=__nav_1_8> <span class="md-nav__icon md-icon"></span> 监控 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mysql/exporter/ class=md-nav__link> <span class=md-ellipsis> exporter </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_9> <label class=md-nav__link for=__nav_1_9 id=__nav_1_9_label tabindex> <span class=md-ellipsis> 压测 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_9_label aria-expanded=false> <label class=md-nav__title for=__nav_1_9> <span class="md-nav__icon md-icon"></span> 压测 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mysql/mysqlslap/ class=md-nav__link> <span class=md-ellipsis> mysqlslap </span> </a> </li> <li class=md-nav__item> <a href=https://bodani.github.io/mysql45 class=md-nav__link> <span class=md-ellipsis> mysql45 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../postgres/ class="md-nav__link "> <span class=md-ellipsis> PostgreSQL </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> PostgreSQL </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex> <span class=md-ellipsis> 安装与配置 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> 安装与配置 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/install/install01/ class=md-nav__link> <span class=md-ellipsis> 安装 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/install02/ class=md-nav__link> <span class=md-ellipsis> 安装详解 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/install/ class=md-nav__link> <span class=md-ellipsis> 安装进阶 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/config/ class=md-nav__link> <span class=md-ellipsis> 配置 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> 高可用 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> 高可用 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/ha/ha_fd/ class=md-nav__link> <span class=md-ellipsis> 设计分析 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/ha/patroni/ class=md-nav__link> <span class=md-ellipsis> Patroni集群 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/ha/patroni02/ class=md-nav__link> <span class=md-ellipsis> Patroni高级 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/ha/pgautofailover/ class=md-nav__link> <span class=md-ellipsis> PGAutofailover </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/ha/repmgr/ class=md-nav__link> <span class=md-ellipsis> Repmgr </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/ha/repmgrd/ class=md-nav__link> <span class=md-ellipsis> RepmgrD </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/ha/adlock/ class=md-nav__link> <span class=md-ellipsis> 一致性 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__container"> <a href=../../postgres/index/ class="md-nav__link "> <span class=md-ellipsis> 索引与查询优化 </span> </a> <label class="md-nav__link " for=__nav_2_4 id=__nav_2_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> 索引与查询优化 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/index/index01/ class=md-nav__link> <span class=md-ellipsis> 索引类型及使用场景 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/index/index-invalid/ class=md-nav__link> <span class=md-ellipsis> 索引失效 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/index/index-bloom/ class=md-nav__link> <span class=md-ellipsis> Bloom索引 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/index/hypopg-index/ class=md-nav__link> <span class=md-ellipsis> 假设索引 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/index/partition/ class=md-nav__link> <span class=md-ellipsis> 表分区 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/index/partman/ class=md-nav__link> <span class=md-ellipsis> Partman插件 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/index/template/ class=md-nav__link> <span class=md-ellipsis> 模板表 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/index/unlogged_table/ class=md-nav__link> <span class=md-ellipsis> 未记录表 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex> <span class=md-ellipsis> 性能优化 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> 性能优化 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/performance/fillfactor/ class=md-nav__link> <span class=md-ellipsis> 填充因子 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/stat/ class=md-nav__link> <span class=md-ellipsis> 统计信息 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/params/ class=md-nav__link> <span class=md-ellipsis> 参数优化 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/high_level_sql/ class=md-nav__link> <span class=md-ellipsis> 高级SQL </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/FunctionsandOperators/ class=md-nav__link> <span class=md-ellipsis> 连接函数 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/vacuum/ class=md-nav__link> <span class=md-ellipsis> VACUUM操作 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/vacuum_limit/ class=md-nav__link> <span class=md-ellipsis> VACUUM限制 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/hotupdate/ class=md-nav__link> <span class=md-ellipsis> 冻结机制 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/thinking_in_db_performance/ class=md-nav__link> <span class=md-ellipsis> 性能优化思考 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/thinking_in_db_tune/ class=md-nav__link> <span class=md-ellipsis> 系统调优 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex> <span class=md-ellipsis> 数据维护 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_6_label aria-expanded=false> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> 数据维护 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/install/toast/ class=md-nav__link> <span class=md-ellipsis> 事务管理 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/delete/ class=md-nav__link> <span class=md-ellipsis> 数据删除 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/checkpoint/ class=md-nav__link> <span class=md-ellipsis> 检查点 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/daily_management/ class=md-nav__link> <span class=md-ellipsis> 日常管理 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/bgwriter/ class=md-nav__link> <span class=md-ellipsis> BGWriter </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/tablespace/ class=md-nav__link> <span class=md-ellipsis> 表空间 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/pgstattuple/ class=md-nav__link> <span class=md-ellipsis> 空间工具 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex> <span class=md-ellipsis> 监控分析 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> 监控分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/tools/monitor/ class=md-nav__link> <span class=md-ellipsis> 监控基础 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/monitor-sql/ class=md-nav__link> <span class=md-ellipsis> SQL监控 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/view_pg_stat_activity/ class=md-nav__link> <span class=md-ellipsis> STAT视图 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/view_pg_stat_bgwriter/ class=md-nav__link> <span class=md-ellipsis> 统计BGWriter </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/monitor_explain/ class=md-nav__link> <span class=md-ellipsis> Explain分析 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_activity/ class=md-nav__link> <span class=md-ellipsis> 活动视图 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/dba/ class=md-nav__link> <span class=md-ellipsis> 数据库监控 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex> <span class=md-ellipsis> 扩展模块 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> 扩展模块 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/extentions/citus01/ class=md-nav__link> <span class=md-ellipsis> Citus分布式 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/citus11/ class=md-nav__link> <span class=md-ellipsis> Citus高级 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/timescaledb/ class=md-nav__link> <span class=md-ellipsis> TimescaleDB </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/pipelinedb01/ class=md-nav__link> <span class=md-ellipsis> PipelineDB </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/pipelinedb02/ class=md-nav__link> <span class=md-ellipsis> PipelineDB实战 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/pgpool2/ class=md-nav__link> <span class=md-ellipsis> PGPool-II </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/pgbouncer/ class=md-nav__link> <span class=md-ellipsis> PGBouncer </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/pg_rman/ class=md-nav__link> <span class=md-ellipsis> PGBackRMAN </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/pg_fdw/ class=md-nav__link> <span class=md-ellipsis> FDW外部表 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_9> <label class=md-nav__link for=__nav_2_9 id=__nav_2_9_label tabindex> <span class=md-ellipsis> 数据同步 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_9_label aria-expanded=false> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> 数据同步 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/replication/replication01/ class=md-nav__link> <span class=md-ellipsis> 流复制 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/replication/replication02/ class=md-nav__link> <span class=md-ellipsis> 复制原理 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/replication/logical-replication/ class=md-nav__link> <span class=md-ellipsis> 逻辑复制 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/replication/logical-replication_failover/ class=md-nav__link> <span class=md-ellipsis> 逻辑复制故障切换 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_rewind/ class=md-nav__link> <span class=md-ellipsis> pg_rewind </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_10> <div class="md-nav__link md-nav__container"> <a href=../../postgres/backup/ class="md-nav__link "> <span class=md-ellipsis> 备份与恢复 </span> </a> <label class="md-nav__link " for=__nav_2_10 id=__nav_2_10_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_10_label aria-expanded=false> <label class=md-nav__title for=__nav_2_10> <span class="md-nav__icon md-icon"></span> 备份与恢复 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/backup/logical-backup/ class=md-nav__link> <span class=md-ellipsis> 逻辑备份 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/backup/physical-backup/ class=md-nav__link> <span class=md-ellipsis> 物理备份 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/backup/pgbackrest/ class=md-nav__link> <span class=md-ellipsis> pgBackRest </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/backup/wal-g/ class=md-nav__link> <span class=md-ellipsis> WAL-G备份 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/backup/pgcopydb/ class=md-nav__link> <span class=md-ellipsis> pgcopydb迁移 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/backup/reback/ class=md-nav__link> <span class=md-ellipsis> 数据恢复基础 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/backup/reback_supper_user/ class=md-nav__link> <span class=md-ellipsis> 超级用户恢复 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/backup/pitr/ class=md-nav__link> <span class=md-ellipsis> PITR备份恢复 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_11> <label class=md-nav__link for=__nav_2_11 id=__nav_2_11_label tabindex> <span class=md-ellipsis> 安全管理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_11_label aria-expanded=false> <label class=md-nav__title for=__nav_2_11> <span class="md-nav__icon md-icon"></span> 安全管理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/security/role-manager/ class=md-nav__link> <span class=md-ellipsis> 角色管理 </span> </a> </li> <li class=md-nav__item> <a href=../../mysql/PrivilegeManagement/ class=md-nav__link> <span class=md-ellipsis> 权限管理 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/security/login_nopasswd/ class=md-nav__link> <span class=md-ellipsis> 连接认证 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/security/ssl/ class=md-nav__link> <span class=md-ellipsis> SSL安全 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/security/prepare/ class=md-nav__link> <span class=md-ellipsis> 备用服务 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/security/readonly/ class=md-nav__link> <span class=md-ellipsis> 只读实例 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_12> <label class=md-nav__link for=__nav_2_12 id=__nav_2_12_label tabindex> <span class=md-ellipsis> 高级特性 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_12_label aria-expanded=false> <label class=md-nav__title for=__nav_2_12> <span class="md-nav__icon md-icon"></span> 高级特性 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/design/wal_lsn/ class=md-nav__link> <span class=md-ellipsis> WAL操作详解 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/design/wal_size/ class=md-nav__link> <span class=md-ellipsis> WAL配置大小 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/design/insert01/ class=md-nav__link> <span class=md-ellipsis> 高级插入技巧 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/design/upset/ class=md-nav__link> <span class=md-ellipsis> UPSERT </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/design/hll/ class=md-nav__link> <span class=md-ellipsis> HLL统计 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/design/pg_json/ class=md-nav__link> <span class=md-ellipsis> JSON处理 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/design/pg_trgm/ class=md-nav__link> <span class=md-ellipsis> TRGM相似搜索 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_13> <label class=md-nav__link for=__nav_2_13 id=__nav_2_13_label tabindex> <span class=md-ellipsis> 数据库设计 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_13_label aria-expanded=false> <label class=md-nav__title for=__nav_2_13> <span class="md-nav__icon md-icon"></span> 数据库设计 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/design/normal-form/ class=md-nav__link> <span class=md-ellipsis> 范式理论 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/design/materialized/ class=md-nav__link> <span class=md-ellipsis> 物化视图 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/design/extention/ class=md-nav__link> <span class=md-ellipsis> 扩展功能 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_14> <label class=md-nav__link for=__nav_2_14 id=__nav_2_14_label tabindex> <span class=md-ellipsis> 工具集 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_14_label aria-expanded=false> <label class=md-nav__title for=__nav_2_14> <span class="md-nav__icon md-icon"></span> 工具集 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/tools/pgbench/ class=md-nav__link> <span class=md-ellipsis> pgbench压测 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_elk/ class=md-nav__link> <span class=md-ellipsis> 集群扩展 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_pathman/ class=md-nav__link> <span class=md-ellipsis> pgpathman分片 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_prewarm/ class=md-nav__link> <span class=md-ellipsis> 预加载缓存 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_buffercache/ class=md-nav__link> <span class=md-ellipsis> 统计预缓存 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pgfincore/ class=md-nav__link> <span class=md-ellipsis> 模糊查询 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/lock_wait/ class=md-nav__link> <span class=md-ellipsis> 锁等待分析 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pgage/ class=md-nav__link> <span class=md-ellipsis> 行数统计 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pgwatch2/ class=md-nav__link> <span class=md-ellipsis> 监控系统 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_rewrite/ class=md-nav__link> <span class=md-ellipsis> 备份压缩 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_prewarm/ class=md-nav__link> <span class=md-ellipsis> 大页支持 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_lock/ class=md-nav__link> <span class=md-ellipsis> 读写分析 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/pgstattuple/ class=md-nav__link> <span class=md-ellipsis> 表分析 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_citus/ class=md-nav__link> <span class=md-ellipsis> CITUS扩展 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_15> <label class=md-nav__link for=__nav_2_15 id=__nav_2_15_label tabindex> <span class=md-ellipsis> 版本与历史 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_15_label aria-expanded=false> <label class=md-nav__title for=__nav_2_15> <span class="md-nav__icon md-icon"></span> 版本与历史 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/install/postgres12/ class=md-nav__link> <span class=md-ellipsis> 12版特性 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/postgresql-howto/ class=md-nav__link> <span class=md-ellipsis> 使用指南 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/tpch/ class=md-nav__link> <span class=md-ellipsis> TPC-H基准 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/maintenance/archive/ class=md-nav__link> <span class=md-ellipsis> 备份归档 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/extentions/citus01/ class=md-nav__link> <span class=md-ellipsis> 扩展目录 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/install/config/ class=md-nav__link> <span class=md-ellipsis> 配置文件目录 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/monitor/ class=md-nav__link> <span class=md-ellipsis> 监控目录 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_16> <label class=md-nav__link for=__nav_2_16 id=__nav_2_16_label tabindex> <span class=md-ellipsis> 架构与原理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_16_label aria-expanded=false> <label class=md-nav__title for=__nav_2_16> <span class="md-nav__icon md-icon"></span> 架构与原理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/install/cluster/ class=md-nav__link> <span class=md-ellipsis> 数据库架构 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/troubleshooting/debezium/ class=md-nav__link> <span class=md-ellipsis> 系统分析 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/troubleshooting/dts/ class=md-nav__link> <span class=md-ellipsis> 迁移与DTS </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/troubleshooting/explain/ class=md-nav__link> <span class=md-ellipsis> 系统锁定分析 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/troubleshooting/libpg/ class=md-nav__link> <span class=md-ellipsis> 登录处理流程 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_rewrite/ class=md-nav__link> <span class=md-ellipsis> 功能分析 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_17> <label class=md-nav__link for=__nav_2_17 id=__nav_2_17_label tabindex> <span class=md-ellipsis> 故障排除与问题解决 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_17_label aria-expanded=false> <label class=md-nav__title for=__nav_2_17> <span class="md-nav__icon md-icon"></span> 故障排除与问题解决 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/troubleshooting/oom/ class=md-nav__link> <span class=md-ellipsis> OOM问题 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/troubleshooting/auto_vacuum_trigger/ class=md-nav__link> <span class=md-ellipsis> 空间自动清理 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/tools/pg_prewarm/ class=md-nav__link> <span class=md-ellipsis> 数据预加载 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/troubleshooting/awsome-postgres/ class=md-nav__link> <span class=md-ellipsis> 案例研究 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../middleware/ class="md-nav__link "> <span class=md-ellipsis> 中间件 </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 中间件 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__container"> <a href=../../clickhouse/install/ class="md-nav__link "> <span class=md-ellipsis> ClickHouse </span> </a> <label class="md-nav__link " for=__nav_3_2 id=__nav_3_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> ClickHouse </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../clickhouse/install/install_single/ class=md-nav__link> <span class=md-ellipsis> 单机版 </span> </a> </li> <li class=md-nav__item> <a href=../../clickhouse/install/install_cluster/ class=md-nav__link> <span class=md-ellipsis> 集群版 </span> </a> </li> <li class=md-nav__item> <a href=../../clickhouse/ch-keeper/ class=md-nav__link> <span class=md-ellipsis> keeper </span> </a> </li> <li class=md-nav__item> <a href=../../clickhouse/demo/ class=md-nav__link> <span class=md-ellipsis> 表引擎 </span> </a> </li> <li class=md-nav__item> <a href=../../clickhouse/compresstion/ class=md-nav__link> <span class=md-ellipsis> 压缩 </span> </a> </li> <li class=md-nav__item> <a href=../../clickhouse/restore/ class=md-nav__link> <span class=md-ellipsis> 恢复 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex> <span class=md-ellipsis> MongoDB </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> MongoDB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mongodb/install/ class=md-nav__link> <span class=md-ellipsis> 安装 </span> </a> </li> <li class=md-nav__item> <a href=../../mongodb/config/ class=md-nav__link> <span class=md-ellipsis> 配置 </span> </a> </li> <li class=md-nav__item> <a href=../../mongodb/replication/ class=md-nav__link> <span class=md-ellipsis> 副本集 </span> </a> </li> <li class=md-nav__item> <a href=../../mongodb/sharding/ class=md-nav__link> <span class=md-ellipsis> 分片集群 </span> </a> </li> <li class=md-nav__item> <a href=../../mongodb/privilege/ class=md-nav__link> <span class=md-ellipsis> 权限管理 </span> </a> </li> <li class=md-nav__item> <a href=../../mongodb/backup_restore/ class=md-nav__link> <span class=md-ellipsis> 备份恢复 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex> <span class=md-ellipsis> 监控系统 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> 监控系统 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../monitor/prometheus/ class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=../../monitor/grafana/ class=md-nav__link> <span class=md-ellipsis> Grafana </span> </a> </li> <li class=md-nav__item> <a href=../../monitor/exporter/ class=md-nav__link> <span class=md-ellipsis> exporter </span> </a> </li> <li class=md-nav__item> <a href=../../monitor/metrics/ class=md-nav__link> <span class=md-ellipsis> 监控指标 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex> <span class=md-ellipsis> fluentbit </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> fluentbit </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../fluentbit/intro/ class=md-nav__link> <span class=md-ellipsis> 介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../fluentbit/problems/ class=md-nav__link> <span class=md-ellipsis> 问题排查 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> 容器 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 容器 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../kubernetes/sts_update/ class=md-nav__link> <span class=md-ellipsis> sts 滚动更新 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../linux/ class="md-nav__link "> <span class=md-ellipsis> Linux </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex> <span class=md-ellipsis> 基础工具与系统管理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> 基础工具与系统管理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/tools/ class=md-nav__link> <span class=md-ellipsis> 系统工具 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/process-comm/ class=md-nav__link> <span class=md-ellipsis> 进程管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/sysstat/ class=md-nav__link> <span class=md-ellipsis> 性能监控 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/meminfo/ class=md-nav__link> <span class=md-ellipsis> 内存管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/hard_store/ class=md-nav__link> <span class=md-ellipsis> 磁盘管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/findhidpid/ class=md-nav__link> <span class=md-ellipsis> 文件系统工具 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/time-cmd/ class=md-nav__link> <span class=md-ellipsis> 时间管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/mail/ class=md-nav__link> <span class=md-ellipsis> 邮件管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cpu_temp/ class=md-nav__link> <span class=md-ellipsis> 电源管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/syslog/ class=md-nav__link> <span class=md-ellipsis> 系统日志 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex> <span class=md-ellipsis> 命令详解与实用工具 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> 命令详解与实用工具 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/cmd-awk/ class=md-nav__link> <span class=md-ellipsis> awk命令详解 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cmd-gpasswd/ class=md-nav__link> <span class=md-ellipsis> gpasswd命令 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cmd-sed/ class=md-nav__link> <span class=md-ellipsis> sed命令详解 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cmd-vim/ class=md-nav__link> <span class=md-ellipsis> vim命令使用 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cmd-xargs/ class=md-nav__link> <span class=md-ellipsis> xargs命令使用 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/fu-cmd/ class=md-nav__link> <span class=md-ellipsis> 其他常用命令 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/install-cmd/ class=md-nav__link> <span class=md-ellipsis> 系统安装相关命令 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cmd-pstack/ class=md-nav__link> <span class=md-ellipsis> 安装相关脚本工具 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex> <span class=md-ellipsis> 虚拟化与容器技术 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> 虚拟化与容器技术 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/kvm01/ class=md-nav__link> <span class=md-ellipsis> KVM 虚拟化 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/kuberctl/ class=md-nav__link> <span class=md-ellipsis> K8s 管理工具 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/wind-run/ class=md-nav__link> <span class=md-ellipsis> 容器网络管理 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex> <span class=md-ellipsis> 硬件与驱动管理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> 硬件与驱动管理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/smartctl/ class=md-nav__link> <span class=md-ellipsis> 硬件监控 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/dmidecode/ class=md-nav__link> <span class=md-ellipsis> 硬件信息查询 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/mdadm/ class=md-nav__link> <span class=md-ellipsis> 磁盘阵列管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/hdparm/ class=md-nav__link> <span class=md-ellipsis> 硬盘性能检测 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/ipmitool/ class=md-nav__link> <span class=md-ellipsis> 远程硬件管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cpu_utilize/ class=md-nav__link> <span class=md-ellipsis> CPU温度与利用率 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex> <span class=md-ellipsis> 安全与权限管理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> 安全与权限管理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/webmanage/ class=md-nav__link> <span class=md-ellipsis> 系统安全管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/nice/ class=md-nav__link> <span class=md-ellipsis> 用户权限管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/wheel/ class=md-nav__link> <span class=md-ellipsis> 临时用户组 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/no-passwd/ class=md-nav__link> <span class=md-ellipsis> 免密登录配置 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/bmcpasswd/ class=md-nav__link> <span class=md-ellipsis> sudo配置与BMC </span> </a> </li> <li class=md-nav__item> <a href=../../linux/git-nopassword/ class=md-nav__link> <span class=md-ellipsis> Git免密配置 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/resetpasswd-centos7/ class=md-nav__link> <span class=md-ellipsis> 账户密码重置 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/at-crontab/ class=md-nav__link> <span class=md-ellipsis> 任务调度管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/terminal-reuse/ class=md-nav__link> <span class=md-ellipsis> 终端会话复用 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/ln-s/ class=md-nav__link> <span class=md-ellipsis> SSH免密与连接 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/openvpn/ class=md-nav__link> <span class=md-ellipsis> 安全VPN管理 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex> <span class=md-ellipsis> 系统配置与调优 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> 系统配置与调优 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/linux_tunning/ class=md-nav__link> <span class=md-ellipsis> 系统参数调整 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cpu-affinity/ class=md-nav__link> <span class=md-ellipsis> 进程优先级与CPU亲和性 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/kworker/ class=md-nav__link> <span class=md-ellipsis> 内核后台进程 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/qos/ class=md-nav__link> <span class=md-ellipsis> 网络QoS管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/init-centos/ class=md-nav__link> <span class=md-ellipsis> 系统启动优化 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/ubuntu2004-network/ class=md-nav__link> <span class=md-ellipsis> 网络配置Ubuntu </span> </a> </li> <li class=md-nav__item> <a href=../../linux/memtester/ class=md-nav__link> <span class=md-ellipsis> 系统内存大页 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/ssdiotimeout/ class=md-nav__link> <span class=md-ellipsis> I/O超时处理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/backlog-config/ class=md-nav__link> <span class=md-ellipsis> Backlog队列管理 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_8> <label class=md-nav__link for=__nav_5_8 id=__nav_5_8_label tabindex> <span class=md-ellipsis> 存储与文件系统管理 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> 存储与文件系统管理 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/lvm/ class=md-nav__link> <span class=md-ellipsis> LVM存储管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/parted/ class=md-nav__link> <span class=md-ellipsis> 磁盘分区工具 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/fastdeletfiles/ class=md-nav__link> <span class=md-ellipsis> 系统空间清理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/nospace-device/ class=md-nav__link> <span class=md-ellipsis> 无空间设备处理 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_9> <label class=md-nav__link for=__nav_5_9 id=__nav_5_9_label tabindex> <span class=md-ellipsis> 网络与协议分析 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_9_label aria-expanded=false> <label class=md-nav__title for=__nav_5_9> <span class="md-nav__icon md-icon"></span> 网络与协议分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/tcpdump/ class=md-nav__link> <span class=md-ellipsis> 网络抓包分析 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/iperf/ class=md-nav__link> <span class=md-ellipsis> 网络诊断工具 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/last/ class=md-nav__link> <span class=md-ellipsis> 网络状态监控 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/wget/ class=md-nav__link> <span class=md-ellipsis> 下载工具wget </span> </a> </li> <li class=md-nav__item> <a href=../../linux/stat/ class=md-nav__link> <span class=md-ellipsis> 系统资源统计 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_10> <label class=md-nav__link for=__nav_5_10 id=__nav_5_10_label tabindex> <span class=md-ellipsis> 数据恢复与备份 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_10_label aria-expanded=false> <label class=md-nav__title for=__nav_5_10> <span class="md-nav__icon md-icon"></span> 数据恢复与备份 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/ddrescue/ class=md-nav__link> <span class=md-ellipsis> 数据恢复ddrescue </span> </a> </li> <li class=md-nav__item> <a href=../../linux/fio/ class=md-nav__link> <span class=md-ellipsis> 磁盘性能测试fio </span> </a> </li> <li class=md-nav__item> <a href=../../linux/vm-config/ class=md-nav__link> <span class=md-ellipsis> VM性能配置 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/memtest/ class=md-nav__link> <span class=md-ellipsis> 内存测试 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/patch/ class=md-nav__link> <span class=md-ellipsis> 系统补丁管理 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_11> <label class=md-nav__link for=__nav_5_11 id=__nav_5_11_label tabindex> <span class=md-ellipsis> 调试与性能分析 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_11_label aria-expanded=false> <label class=md-nav__title for=__nav_5_11> <span class="md-nav__icon md-icon"></span> 调试与性能分析 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/perf/ class=md-nav__link> <span class=md-ellipsis> 性能分析工具perf </span> </a> </li> <li class=md-nav__item> <a href=../../linux/pmap/ class=md-nav__link> <span class=md-ellipsis> 内存映射分析pmap </span> </a> </li> <li class=md-nav__item> <a href=../../linux/pstack_strace/ class=md-nav__link> <span class=md-ellipsis> 进程调试 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/so/ class=md-nav__link> <span class=md-ellipsis> 符号表与共享库 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/cgroups/ class=md-nav__link> <span class=md-ellipsis> 硬件驱动分析 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_12> <label class=md-nav__link for=__nav_5_12 id=__nav_5_12_label tabindex> <span class=md-ellipsis> 安全增强工具 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_12_label aria-expanded=false> <label class=md-nav__title for=__nav_5_12> <span class="md-nav__icon md-icon"></span> 安全增强工具 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/elfutil/ class=md-nav__link> <span class=md-ellipsis> ELF工具详解 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/pid_m/ class=md-nav__link> <span class=md-ellipsis> 调试堆栈分析 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/lang/ class=md-nav__link> <span class=md-ellipsis> 软件包语言配置 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_13> <label class=md-nav__link for=__nav_5_13 id=__nav_5_13_label tabindex> <span class=md-ellipsis> 系统维护与问题解决 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_13_label aria-expanded=false> <label class=md-nav__title for=__nav_5_13> <span class="md-nav__icon md-icon"></span> 系统维护与问题解决 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../linux/lightdm/ class=md-nav__link> <span class=md-ellipsis> 轻量桌面管理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/4k-wa/ class=md-nav__link> <span class=md-ellipsis> 硬盘4K对齐 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/repo/ class=md-nav__link> <span class=md-ellipsis> 仓库远程配置 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/git-sparsecheckout/ class=md-nav__link> <span class=md-ellipsis> 版本控制优化 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/github-dns/ class=md-nav__link> <span class=md-ellipsis> DNS优化配置 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/ubuntu2004-qa/ class=md-nav__link> <span class=md-ellipsis> Ubuntu2004常见问题 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/git-objects-clean/ class=md-nav__link> <span class=md-ellipsis> Git对象清理 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/xz/ class=md-nav__link> <span class=md-ellipsis> 归档压缩 </span> </a> </li> <li class=md-nav__item> <a href=../../linux/frp/ class=md-nav__link> <span class=md-ellipsis> 便捷连接工具 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> 数据库思考 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> 数据库思考 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../postgres/maintenance/thinking_in_db_fd/ class=md-nav__link> <span class=md-ellipsis> 结构设计 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/thinking_in_db_performance/ class=md-nav__link> <span class=md-ellipsis> 性能优化 </span> </a> </li> <li class=md-nav__item> <a href=../../postgres/performance/thinking_in_db_tune/ class=md-nav__link> <span class=md-ellipsis> 模块调优 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 组件协作架构 </span> </a> <nav class=md-nav aria-label=组件协作架构> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 各组件角色 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 部署 </span> </a> <nav class=md-nav aria-label=部署> <ul class=md-nav__list> <li class=md-nav__item> <a href=#postgresql-minio class=md-nav__link> <span class=md-ellipsis> postgresql, minio 略 </span> </a> </li> <li class=md-nav__item> <a href=#keycloak class=md-nav__link> <span class=md-ellipsis> 部署Keycloak </span> </a> <nav class=md-nav aria-label=部署Keycloak> <ul class=md-nav__list> <li class=md-nav__item> <a href=#realm class=md-nav__link> <span class=md-ellipsis> 创建Realm与客户端： </span> </a> <nav class=md-nav aria-label=创建Realm与客户端：> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 配置用户与角色： </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#keycloak_1 class=md-nav__link> <span class=md-ellipsis> 设置keycloak </span> </a> <nav class=md-nav aria-label=设置keycloak> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 验证 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#nessis class=md-nav__link> <span class=md-ellipsis> 配置nessis </span> </a> </li> <li class=md-nav__item> <a href=#spark-sql class=md-nav__link> <span class=md-ellipsis> spark-sql </span> </a> </li> <li class=md-nav__item> <a href=#nessie-cli class=md-nav__link> <span class=md-ellipsis> nessie-cli </span> </a> <nav class=md-nav aria-label=nessie-cli> <ul class=md-nav__list> <li class=md-nav__item> <a href=#nessie class=md-nav__link> <span class=md-ellipsis> nessie 配置 附录 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#copyright-c-2020-dremio class=md-nav__link> <span class=md-ellipsis> Copyright (C) 2020 Dremio </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#licensed-under-the-apache-license-version-20-the-license class=md-nav__link> <span class=md-ellipsis> Licensed under the Apache License, Version 2.0 (the "License"); </span> </a> </li> <li class=md-nav__item> <a href=#you-may-not-use-this-file-except-in-compliance-with-the-license class=md-nav__link> <span class=md-ellipsis> you may not use this file except in compliance with the License. </span> </a> </li> <li class=md-nav__item> <a href=#you-may-obtain-a-copy-of-the-license-at class=md-nav__link> <span class=md-ellipsis> You may obtain a copy of the License at </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#httpwwwapacheorglicenseslicense-20 class=md-nav__link> <span class=md-ellipsis> http://www.apache.org/licenses/LICENSE-2.0 </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#unless-required-by-applicable-law-or-agreed-to-in-writing-software class=md-nav__link> <span class=md-ellipsis> Unless required by applicable law or agreed to in writing, software </span> </a> </li> <li class=md-nav__item> <a href=#distributed-under-the-license-is-distributed-on-an-as-is-basis class=md-nav__link> <span class=md-ellipsis> distributed under the License is distributed on an "AS IS" BASIS, </span> </a> </li> <li class=md-nav__item> <a href=#without-warranties-or-conditions-of-any-kind-either-express-or-implied class=md-nav__link> <span class=md-ellipsis> WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. </span> </a> </li> <li class=md-nav__item> <a href=#see-the-license-for-the-specific-language-governing-permissions-and class=md-nav__link> <span class=md-ellipsis> See the License for the specific language governing permissions and </span> </a> </li> <li class=md-nav__item> <a href=#limitations-under-the-license class=md-nav__link> <span class=md-ellipsis> limitations under the License. </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#nessie-settings class=md-nav__link> <span class=md-ellipsis> Nessie settings </span> </a> <nav class=md-nav aria-label="Nessie settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#default-base-branch-name class=md-nav__link> <span class=md-ellipsis> default base branch name </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#to-provide-secrets-via-a-keystore-via-quarkus-the-following-configuration class=md-nav__link> <span class=md-ellipsis> To provide secrets via a keystore via Quarkus, the following configuration </span> </a> </li> <li class=md-nav__item> <a href=#options-need-to-be-configured-accordingly class=md-nav__link> <span class=md-ellipsis> options need to be configured accordingly. </span> </a> </li> <li class=md-nav__item> <a href=#for-details-see-httpsquarkusioguidesconfig-secretsstore-secrets-in-a-keystore class=md-nav__link> <span class=md-ellipsis> For details see https://quarkus.io/guides/config-secrets#store-secrets-in-a-keystore </span> </a> </li> <li class=md-nav__item> <a href=#smallryeconfigsourcekeystorepropertiespathproperties-keystore class=md-nav__link> <span class=md-ellipsis> smallrye.config.source.keystore."properties".path=properties # keystore的路径 </span> </a> </li> <li class=md-nav__item> <a href=#smallryeconfigsourcekeystorepropertiespasswordarealpassword-keystore class=md-nav__link> <span class=md-ellipsis> smallrye.config.source.keystore."properties".password=arealpassword # keystore的密码 </span> </a> </li> <li class=md-nav__item> <a href=#smallryeconfigsourcekeystorepropertieshandleraes-gcm-nopadding-keystore class=md-nav__link> <span class=md-ellipsis> smallrye.config.source.keystore."properties".handler=aes-gcm-nopadding # keystore的处理方式 </span> </a> </li> <li class=md-nav__item> <a href=#smallryeconfigsourcekeystorekeypathkey class=md-nav__link> <span class=md-ellipsis> smallrye.config.source.keystore."key".path=key # 密钥的路径 </span> </a> </li> <li class=md-nav__item> <a href=#smallryeconfigsourcekeystorekeypasswordanotherpassword class=md-nav__link> <span class=md-ellipsis> smallrye.config.source.keystore."key".password=anotherpassword # 密钥的密码 </span> </a> </li> <li class=md-nav__item> <a href=#reverse-proxy-settings class=md-nav__link> <span class=md-ellipsis> Reverse Proxy Settings </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#these-config-options-are-mentioned-only-for-documentation-purposes-consult-the class=md-nav__link> <span class=md-ellipsis> These config options are mentioned only for documentation purposes. Consult the </span> </a> </li> <li class=md-nav__item> <a href=#quarkus-documentation-for-running-behind-a-reverse-proxy-and-configure-those class=md-nav__link> <span class=md-ellipsis> Quarkus documentation for "Running behind a reverse proxy" and configure those </span> </a> </li> <li class=md-nav__item> <a href=#depending-on-your-actual-needs class=md-nav__link> <span class=md-ellipsis> depending on your actual needs. </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#see-httpsquarkusioguideshttp-referencereverse-proxy class=md-nav__link> <span class=md-ellipsis> See https://quarkus.io/guides/http-reference#reverse-proxy </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#do-not-enable-these-option-unless-your-reverse-proxy-for-example-istio-or-nginx class=md-nav__link> <span class=md-ellipsis> Do NOT enable these option unless your reverse proxy (for example istio or nginx) </span> </a> </li> <li class=md-nav__item> <a href=#is-properly-setup-to-set-these-headers-but-also-filter-those-from-incoming-requests class=md-nav__link> <span class=md-ellipsis> is properly setup to set these headers but also filter those from incoming requests. </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#quarkushttpproxyproxy-address-forwardingtrue class=md-nav__link> <span class=md-ellipsis> quarkus.http.proxy.proxy-address-forwarding=true # 代理地址转发 </span> </a> </li> <li class=md-nav__item> <a href=#quarkushttpproxyallow-x-forwardedtrue-x-forwarded class=md-nav__link> <span class=md-ellipsis> quarkus.http.proxy.allow-x-forwarded=true # 允许X-Forwarded头 </span> </a> </li> <li class=md-nav__item> <a href=#quarkushttpproxyenable-forwarded-hosttrue-forwarded-host class=md-nav__link> <span class=md-ellipsis> quarkus.http.proxy.enable-forwarded-host=true # 启用Forwarded-Host头 </span> </a> </li> <li class=md-nav__item> <a href=#quarkushttpproxyenable-forwarded-prefixtrue-forwarded-prefix class=md-nav__link> <span class=md-ellipsis> quarkus.http.proxy.enable-forwarded-prefix=true # 启用Forwarded-Prefix头 </span> </a> </li> <li class=md-nav__item> <a href=#quarkushttpproxytrusted-proxies127001 class=md-nav__link> <span class=md-ellipsis> quarkus.http.proxy.trusted-proxies=127.0.0.1 # 信任的代理列表 </span> </a> </li> <li class=md-nav__item> <a href=#support-for-external-secrets-managers-see-http1270018000nessie-latestconfigurationsecrets-manager-settings class=md-nav__link> <span class=md-ellipsis> Support for external secrets managers - see http://127.0.0.1:8000/nessie-latest/configuration/#secrets-manager-settings </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#nessiesecretstype class=md-nav__link> <span class=md-ellipsis> nessie.secrets.type= # 外部密钥管理器类型 </span> </a> </li> <li class=md-nav__item> <a href=#vault-hashicorp-vault-see-httpsdocsquarkiverseioquarkus-vaultdevindexhtmlconfiguration-reference class=md-nav__link> <span class=md-ellipsis> VAULT: Hashicorp Vault. See https://docs.quarkiverse.io/quarkus-vault/dev/index.html#configuration-reference </span> </a> </li> <li class=md-nav__item> <a href=#for-the-quarkus-docs-for-hashicorp-vault-for-specific-information class=md-nav__link> <span class=md-ellipsis> for the Quarkus docs for Hashicorp Vault for specific information. </span> </a> </li> <li class=md-nav__item> <a href=#amazon-aws-secrets-manager-see-httpsdocsquarkiverseioquarkus-amazon-servicesdevamazon-secretsmanagerhtml_configuration_reference class=md-nav__link> <span class=md-ellipsis> AMAZON: AWS Secrets Manager. See https://docs.quarkiverse.io/quarkus-amazon-services/dev/amazon-secretsmanager.html#_configuration_reference </span> </a> </li> <li class=md-nav__item> <a href=#for-the-quarkus-docs-for-amazon-services-secrets-manager-for-specific-information class=md-nav__link> <span class=md-ellipsis> for the Quarkus docs for Amazon Services / Secrets Manager for specific information. </span> </a> </li> <li class=md-nav__item> <a href=#azure-aws-secrets-manager-not-supported-yet class=md-nav__link> <span class=md-ellipsis> AZURE: AWS Secrets Manager. NOT SUPPORTED YET! </span> </a> </li> <li class=md-nav__item> <a href=#see-httpsdocsquarkiverseioquarkus-azure-servicesdevquarkus-azure-key-vaulthtml_extension_configuration_reference class=md-nav__link> <span class=md-ellipsis> See https://docs.quarkiverse.io/quarkus-azure-services/dev/quarkus-azure-key-vault.html#_extension_configuration_reference </span> </a> </li> <li class=md-nav__item> <a href=#for-the-quarkus-docs-for-azure-key-vault class=md-nav__link> <span class=md-ellipsis> for the Quarkus docs for Azure Key Vault </span> </a> </li> <li class=md-nav__item> <a href=#google-google-cloud-secrets-manager-not-supported-yet class=md-nav__link> <span class=md-ellipsis> GOOGLE: Google Cloud Secrets Manager. NOT SUPPORTED YET! </span> </a> </li> <li class=md-nav__item> <a href=#nessiesecretscachemax-elements1000 class=md-nav__link> <span class=md-ellipsis> nessie.secrets.cache.max-elements=1000 # 密钥缓存的最大元素数量 </span> </a> </li> <li class=md-nav__item> <a href=#nessiesecretscachettlpt15m-ttl class=md-nav__link> <span class=md-ellipsis> nessie.secrets.cache.ttl=PT15M # 密钥缓存的TTL（存活时间） </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> </span> </a> </li> <li class=md-nav__item> <a href=#when-using-google-cloud-secret-manager-you-may-have-to-configure-this-to-true class=md-nav__link> <span class=md-ellipsis> When using Google Cloud Secret Manager you may have to configure this to 'true' </span> </a> </li> <li class=md-nav__item> <a href=#to-enable-a-specific-secrets-manager-consult-the-documentations-for-those-more class=md-nav__link> <span class=md-ellipsis> To enable a specific secrets manager consult the documentations for those, more </span> </a> </li> <li class=md-nav__item> <a href=#information-here-httpsprojectnessieorgnessie-latestconfigurationsecrets-manager-settings class=md-nav__link> <span class=md-ellipsis> information here: https://projectnessie.org/nessie-latest/configuration/#secrets-manager-settings </span> </a> <nav class=md-nav aria-label="information here: https://projectnessie.org/nessie-latest/configuration/#secrets-manager-settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#nessie-catalog class=md-nav__link> <span class=md-ellipsis> Nessie Catalog </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optional-validate-that-referenced-secrets-exist-default-is-false class=md-nav__link> <span class=md-ellipsis> Optional: validate that referenced secrets exist (default is false) </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogvalidate-secretstrue class=md-nav__link> <span class=md-ellipsis> nessie.catalog.validate-secrets=true # 验证引用的秘密是否存在 </span> </a> </li> <li class=md-nav__item> <a href=#optional-disable-health-check-for-object-stores-default-is-true class=md-nav__link> <span class=md-ellipsis> Optional: disable health check for object stores (default is true) </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogobject-storeshealth-checkenabledfalse class=md-nav__link> <span class=md-ellipsis> nessie.catalog.object-stores.health-check.enabled=false # 禁用对象存储的健康检查 </span> </a> </li> <li class=md-nav__item> <a href=#iceberg-default-config-can-be-overridden-per-warehouse class=md-nav__link> <span class=md-ellipsis> Iceberg default config (can be overridden per warehouse) </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogiceberg-config-defaultspropvalue-iceberg class=md-nav__link> <span class=md-ellipsis> nessie.catalog.iceberg-config-defaults.prop=value # Iceberg默认配置 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogiceberg-config-overridespropvalue-iceberg class=md-nav__link> <span class=md-ellipsis> nessie.catalog.iceberg-config-overrides.prop=value # Iceberg配置覆盖 </span> </a> </li> <li class=md-nav__item> <a href=#warehouses class=md-nav__link> <span class=md-ellipsis> Warehouses </span> </a> </li> <li class=md-nav__item> <a href=#default-warehouse class=md-nav__link> <span class=md-ellipsis> default warehouse </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogdefault-warehousewarehouse class=md-nav__link> <span class=md-ellipsis> nessie.catalog.default-warehouse=warehouse # 默认仓库 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogwarehouseswarehouselocation class=md-nav__link> <span class=md-ellipsis> nessie.catalog.warehouses.warehouse.location= # 仓库位置 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogwarehouseswarehouseiceberg-config-defaultsprop-nameprop-value-iceberg class=md-nav__link> <span class=md-ellipsis> nessie.catalog.warehouses.warehouse.iceberg-config-defaults.prop-name=prop-value # 仓库的Iceberg默认配置 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogwarehouseswarehouseiceberg-config-overridesprop-nameprop-value-iceberg class=md-nav__link> <span class=md-ellipsis> nessie.catalog.warehouses.warehouse.iceberg-config-overrides.prop-name=prop-value # 仓库的Iceberg配置覆盖 </span> </a> </li> <li class=md-nav__item> <a href=#additional-warehouses class=md-nav__link> <span class=md-ellipsis> additional warehouses </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogwarehousesanother-warehouselocation class=md-nav__link> <span class=md-ellipsis> nessie.catalog.warehouses.another-warehouse.location= # 额外仓库的位置 </span> </a> </li> <li class=md-nav__item> <a href=#s3-settings class=md-nav__link> <span class=md-ellipsis> S3 settings </span> </a> </li> <li class=md-nav__item> <a href=#default-s3-settings class=md-nav__link> <span class=md-ellipsis> default S3 settings </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservices3default-optionsendpointhttplocalhost9000-s3 class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.s3.default-options.endpoint=http://localhost:9000 # 默认S3设置的端点 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservices3default-optionspath-style-accessfalse class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.s3.default-options.path-style-access=false # 路径样式访问 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservices3default-optionsregionus-west-2 class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.s3.default-options.region=us-west-2 # 区域设置 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservices3default-optionsaccess-keyurnnessie-secretquarkusmy-secretss3-default class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.s3.default-options.access-key=urn:nessie-secret:quarkus:my-secrets.s3-default # 访问密钥 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretss3-defaultnameawsaccesskeyid class=md-nav__link> <span class=md-ellipsis> my-secrets.s3-default.name=awsAccessKeyId # 密钥名称 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretss3-defaultsecretawssecretaccesskey class=md-nav__link> <span class=md-ellipsis> my-secrets.s3-default.secret=awsSecretAccessKey # 密钥内容 </span> </a> </li> <li class=md-nav__item> <a href=#per-bucket-s3-settings class=md-nav__link> <span class=md-ellipsis> per-bucket S3 settings </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservices3bucketsbucket1endpoints3abucket1 class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.s3.buckets.bucket1.endpoint=s3a://bucket1 # 每个桶的设置 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservices3bucketsbucket1access-keyurnnessie-secretquarkusmy-secretss3-bucket class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.s3.buckets.bucket1.access-key=urn:nessie-secret:quarkus:my-secrets.s3-bucket # 桶的访问密钥 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservices3bucketsbucket1regionus-east-1 class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.s3.buckets.bucket1.region=us-east-1 # 桶的区域 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretss3-bucketnameawsaccesskeyid1 class=md-nav__link> <span class=md-ellipsis> my-secrets.s3-bucket.name=awsAccessKeyId1 # 桶的密钥名称 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretss3-bucketsecretawssecretaccesskey1 class=md-nav__link> <span class=md-ellipsis> my-secrets.s3-bucket.secret=awsSecretAccessKey1 # 桶的密钥内容 </span> </a> </li> <li class=md-nav__item> <a href=#gcs-settings class=md-nav__link> <span class=md-ellipsis> GCS settings </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservicegcsdefault-optionshosthttplocalhost4443-gcs class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.gcs.default-options.host=http://localhost:4443 # GCS默认设置的主机 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservicegcsdefault-optionsproject-idnessie-gcsid class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.gcs.default-options.project-id=nessie # GCS默认设置的项目ID </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservicegcsdefault-optionsauth-typeaccess_token-gcs class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.gcs.default-options.auth-type=access_token # GCS默认设置的授权类型 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservicegcsdefault-optionsoauth2-tokenurnnessie-secretquarkusmy-secretsgcs-default-gcsoauth2 class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.gcs.default-options.oauth2-token=urn:nessie-secret:quarkus:my-secrets.gcs-default # GCS默认设置的OAuth2令牌 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretsgcs-defaulttokentokenref-gcs class=md-nav__link> <span class=md-ellipsis> my-secrets.gcs-default.token=tokenRef # GCS默认设置的令牌引用 </span> </a> </li> <li class=md-nav__item> <a href=#per-bucket-gcs-settings class=md-nav__link> <span class=md-ellipsis> per-bucket GCS settings </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservicegcsbucketsbucket1hosthttplocalhost4443 class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.gcs.buckets.bucket1.host=http://localhost:4443 # 每个桶的主机 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservicegcsbucketsbucket1project-idnessie-id class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.gcs.buckets.bucket1.project-id=nessie # 每个桶的项目ID </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservicegcsbucketsbucket1auth-typeaccess_token class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.gcs.buckets.bucket1.auth-type=access_token # 每个桶的授权类型 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogservicegcsbucketsbucket1oauth2-tokenurnnessie-secretquarkusmy-secretsgcs-bucket-oauth2 class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.gcs.buckets.bucket1.oauth2-token=urn:nessie-secret:quarkus:my-secrets.gcs-bucket # 每个桶的OAuth2令牌 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretsgcs-buckettokentokenref class=md-nav__link> <span class=md-ellipsis> my-secrets.gcs-bucket.token=tokenRef # 每个桶的令牌引用 </span> </a> </li> <li class=md-nav__item> <a href=#adls-settings class=md-nav__link> <span class=md-ellipsis> ADLS settings </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogserviceadlsdefault-optionsendpointhttplocalhostadlsgen2bucket-adls class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.adls.default-options.endpoint=http://localhost/adlsgen2/bucket # ADLS默认设置的端点 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogserviceadlsdefault-optionsauth-typenone-adls class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.adls.default-options.auth-type=none # ADLS默认设置的授权类型 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogserviceadlsdefault-optionsaccounturnnessie-secretquarkusmy-secretsadls-default-adls class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.adls.default-options.account=urn:nessie-secret:quarkus:my-secrets.adls-default # ADLS默认设置的账户 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogserviceadlsdefault-optionsconfigurationpropnamepropvalue-adls class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.adls.default-options.configuration.propname=propvalue # ADLS默认设置的配置 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretsadls-defaultnameaccount-adls class=md-nav__link> <span class=md-ellipsis> my-secrets.adls-default.name=account # ADLS默认设置的账户名称 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretsadls-defaultsecretsecret-adls class=md-nav__link> <span class=md-ellipsis> my-secrets.adls-default.secret=secret # ADLS默认设置的密钥 </span> </a> </li> <li class=md-nav__item> <a href=#per-file-system-adls-settings class=md-nav__link> <span class=md-ellipsis> per-file-system ADLS settings </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogserviceadlsfile-systemsbucket1endpointhttplocalhostadlsgen2bucket class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.adls.file-systems.bucket1.endpoint=http://localhost/adlsgen2/bucket # 每个文件系统的端点 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogserviceadlsfile-systemsbucket1auth-typenone class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.adls.file-systems.bucket1.auth-type=none # 每个文件系统的授权类型 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogserviceadlsfile-systemsbucket1accounturnnessie-secretquarkusmy-secretsadls-fs class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.adls.file-systems.bucket1.account=urn:nessie-secret:quarkus:my-secrets.adls-fs # 每个文件系统的账户 </span> </a> </li> <li class=md-nav__item> <a href=#nessiecatalogserviceadlsfile-systemsbucket1configurationpropnamepropvalue class=md-nav__link> <span class=md-ellipsis> nessie.catalog.service.adls.file-systems.bucket1.configuration.propname=propvalue # 每个文件系统的配置 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretsadls-fsnameaccount class=md-nav__link> <span class=md-ellipsis> my-secrets.adls-fs.name=account # 每个文件系统的账户名称 </span> </a> </li> <li class=md-nav__item> <a href=#my-secretsadls-fssecretsecret class=md-nav__link> <span class=md-ellipsis> my-secrets.adls-fs.secret=secret # 每个文件系统的密钥 </span> </a> <nav class=md-nav aria-label="my-secrets.adls-fs.secret=secret # 每个文件系统的密钥"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#nessie-authorization-settings class=md-nav__link> <span class=md-ellipsis> Nessie authorization settings </span> </a> <nav class=md-nav aria-label="Nessie authorization settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#this-will-perform-authorization-on-branchestags-and-content-where-rule-definitions-are class=md-nav__link> <span class=md-ellipsis> This will perform authorization on branches/tags and content where rule definitions are </span> </a> </li> <li class=md-nav__item> <a href=#using-a-common-expression-language-cel-expression-an-intro-to-cel-can-be-found-at-httpsgithubcomgooglecel-specblobmasterdocintromd class=md-nav__link> <span class=md-ellipsis> using a Common Expression Language (CEL) expression (an intro to CEL can be found at https://github.com/google/cel-spec/blob/master/doc/intro.md). </span> </a> </li> <li class=md-nav__item> <a href=#rule-definitions-are-of-the-form-nessieserverauthorizationrules class=md-nav__link> <span class=md-ellipsis> Rule definitions are of the form nessie.server.authorization.rules.= </span> </a> </li> <li class=md-nav__item> <a href=#available-variables-within-the-are-op-role-ref-path class=md-nav__link> <span class=md-ellipsis> Available variables within the are: 'op' / 'role' / 'ref' / 'path' </span> </a> </li> <li class=md-nav__item> <a href=#the-op-variable-in-the-can-be-any-of class=md-nav__link> <span class=md-ellipsis> The 'op' variable in the can be any of: </span> </a> </li> <li class=md-nav__item> <a href=#view_reference-create_reference-delete_reference-read_entries-read_content_key-list_commit_log class=md-nav__link> <span class=md-ellipsis> 'VIEW_REFERENCE', 'CREATE_REFERENCE', 'DELETE_REFERENCE', 'READ_ENTRIES', 'READ_CONTENT_KEY', 'LIST_COMMIT_LOG', </span> </a> </li> <li class=md-nav__item> <a href=#commit_change_against_reference-assign_reference_to_hash-update_entity-read_entity_value-delete_entity-view_reflog class=md-nav__link> <span class=md-ellipsis> 'COMMIT_CHANGE_AGAINST_REFERENCE', 'ASSIGN_REFERENCE_TO_HASH', 'UPDATE_ENTITY', 'READ_ENTITY_VALUE', 'DELETE_ENTITY', 'VIEW_REFLOG' </span> </a> </li> <li class=md-nav__item> <a href=#the-role-refers-to-the-users-role-and-can-be-any-string class=md-nav__link> <span class=md-ellipsis> The 'role' refers to the user's role and can be any string </span> </a> </li> <li class=md-nav__item> <a href=#the-ref-refers-to-a-string-representing-a-branchtag-name class=md-nav__link> <span class=md-ellipsis> The 'ref' refers to a string representing a branch/tag name </span> </a> </li> <li class=md-nav__item> <a href=#the-path-refers-to-the-key-for-the-content-of-an-object-and-can-be-any-string class=md-nav__link> <span class=md-ellipsis> The 'path' refers to the Key for the content of an object and can be any string </span> </a> </li> <li class=md-nav__item> <a href=#some-use-case-based-example-rules-are-shown-below-in-practice-you-might-rather-create-a-single-rule-that-allows-eg-branch-creationdeletioncommits class=md-nav__link> <span class=md-ellipsis> Some "use-case-based" example rules are shown below (in practice you might rather create a single rule that allows e.g. branch creation/deletion/commits/...): </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#nessieserverauthorizationenabledfalse class=md-nav__link> <span class=md-ellipsis> nessie.server.authorization.enabled=false # 是否启用授权 </span> </a> </li> <li class=md-nav__item> <a href=#nessieserverauthorizationtypecel-cel class=md-nav__link> <span class=md-ellipsis> nessie.server.authorization.type=CEL # 授权类型为CEL </span> </a> </li> <li class=md-nav__item> <a href=#opview_reference-rolestartswithtest_user-refstartswithallowedbranch class=md-nav__link> <span class=md-ellipsis> op=='VIEW_REFERENCE' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许分支列表查看规则 </span> </a> </li> <li class=md-nav__item> <a href=#opcreate_reference-rolestartswithtest_user-refstartswithallowedbranch class=md-nav__link> <span class=md-ellipsis> op=='CREATE_REFERENCE' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许分支创建规则 </span> </a> </li> <li class=md-nav__item> <a href=#opdelete_reference-rolestartswithtest_user-refstartswithallowedbranch class=md-nav__link> <span class=md-ellipsis> op=='DELETE_REFERENCE' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许分支删除规则 </span> </a> </li> <li class=md-nav__item> <a href=#oplist_commit_log-rolestartswithtest_user-refstartswithallowedbranch class=md-nav__link> <span class=md-ellipsis> op=='LIST_COMMIT_LOG' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许提交日志列表规则 </span> </a> </li> <li class=md-nav__item> <a href=#opread_entries-rolestartswithtest_user-refstartswithallowedbranch class=md-nav__link> <span class=md-ellipsis> op=='READ_ENTRIES' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许条目读取规则 </span> </a> </li> <li class=md-nav__item> <a href=#opassign_reference_to_hash-rolestartswithtest_user-refstartswithallowedbranch class=md-nav__link> <span class=md-ellipsis> op=='ASSIGN_REFERENCE_TO_HASH' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许分配引用到哈希规则 </span> </a> </li> <li class=md-nav__item> <a href=#opcommit_change_against_reference-rolestartswithtest_user-refstartswithallowedbranch class=md-nav__link> <span class=md-ellipsis> op=='COMMIT_CHANGE_AGAINST_REFERENCE' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许提交规则 </span> </a> </li> <li class=md-nav__item> <a href=#opread_entity_value-roletest_user-pathstartswithallowed class=md-nav__link> <span class=md-ellipsis> op=='READ_ENTITY_VALUE' &amp;&amp; role=='test_user' &amp;&amp; path.startsWith('allowed.') # 允许读取实体值规则 </span> </a> </li> <li class=md-nav__item> <a href=#opupdate_entity-roletest_user-pathstartswithallowed class=md-nav__link> <span class=md-ellipsis> op=='UPDATE_ENTITY' &amp;&amp; role=='test_user' &amp;&amp; path.startsWith('allowed.') # 允许更新实体规则 </span> </a> </li> <li class=md-nav__item> <a href=#opdelete_entity-roletest_user-pathstartswithallowed class=md-nav__link> <span class=md-ellipsis> op=='DELETE_ENTITY' &amp;&amp; role=='test_user' &amp;&amp; path.startsWith('allowed.') # 允许删除实体规则 </span> </a> </li> <li class=md-nav__item> <a href=#opcommit_change_against_reference-roletest_user2-refstartswithallowedbranch class=md-nav__link> <span class=md-ellipsis> op=='COMMIT_CHANGE_AGAINST_REFERENCE' &amp;&amp; role=='test_user2' &amp;&amp; ref.startsWith('allowedBranch') # 允许没有实体更改的提交规则 </span> </a> </li> <li class=md-nav__item> <a href=#roleadmin_user class=md-nav__link> <span class=md-ellipsis> &amp;&amp; role=='admin_user' # 允许所有操作规则 </span> </a> </li> <li class=md-nav__item> <a href=#opview_reflog-roleadmin_user class=md-nav__link> <span class=md-ellipsis> op=='VIEW_REFLOG' &amp;&amp; role=='admin_user' # 允许查看引用日志规则 </span> </a> <nav class=md-nav aria-label="op=='VIEW_REFLOG' && role=='admin_user' # 允许查看引用日志规则"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#which-type-of-version-store-to-use-in_memory-rocksdb-dynamodb2-mongodb2-cassandra2-jdbc2-bigtable class=md-nav__link> <span class=md-ellipsis> which type of version store to use: IN_MEMORY, ROCKSDB, DYNAMODB2, MONGODB2, CASSANDRA2, JDBC2, BIGTABLE. </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#note-the-version-store-type-jdbc-is-deprecated-please-use-the-nessie-server-admin-tool-to-migrate-to-jdbc2 class=md-nav__link> <span class=md-ellipsis> Note: the version store type JDBC is deprecated, please use the Nessie Server Admin Tool to migrate to JDBC2. </span> </a> </li> <li class=md-nav__item> <a href=#note-the-version-store-type-cassandra-is-deprecated-please-use-the-nessie-server-admin-tool-to-migrate-to-cassandra2 class=md-nav__link> <span class=md-ellipsis> Note: the version store type CASSANDRA is deprecated, please use the Nessie Server Admin Tool to migrate to CASSANDRA2. </span> </a> </li> <li class=md-nav__item> <a href=#note-the-version-store-type-dynamodb-is-deprecated-please-use-the-nessie-server-admin-tool-to-migrate-to-dynamodb2 class=md-nav__link> <span class=md-ellipsis> Note: the version store type DYNAMODB is deprecated, please use the Nessie Server Admin Tool to migrate to DYNAMODB2. </span> </a> </li> <li class=md-nav__item> <a href=#note-the-version-store-type-mongodb-is-deprecated-please-use-the-nessie-server-admin-tool-to-migrate-to-mongodb2 class=md-nav__link> <span class=md-ellipsis> Note: the version store type MONGODB is deprecated, please use the Nessie Server Admin Tool to migrate to MONGODB2. </span> </a> </li> <li class=md-nav__item> <a href=#object-cache-size-as-a-value-relative-to-the-jvms-max-heap-size-the-cache-capacity-fraction-adjust-mb class=md-nav__link> <span class=md-ellipsis> Object cache size as a value relative to the JVM's max heap size. The cache-capacity-fraction-adjust-mb </span> </a> </li> <li class=md-nav__item> <a href=#value-will-be-kept-free-when-calculating-the-effective-cache-size-set-cache-capacity-fraction-of-heap class=md-nav__link> <span class=md-ellipsis> value will be "kept free" when calculating the effective cache size. Set cache-capacity-fraction-of-heap </span> </a> </li> <li class=md-nav__item> <a href=#to-0-to-use-a-fixed-size class=md-nav__link> <span class=md-ellipsis> to 0 to use a fixed size. </span> </a> </li> <li class=md-nav__item> <a href=#entirely-disabling-the-cache-is-not-recommended-and-will-negatively-affect-performance class=md-nav__link> <span class=md-ellipsis> Entirely disabling the cache is not recommended and will negatively affect performance. </span> </a> </li> <li class=md-nav__item> <a href=#nessieversionstorepersistcache-capacity-fraction-of-heap07 class=md-nav__link> <span class=md-ellipsis> nessie.version.store.persist.cache-capacity-fraction-of-heap=0.7 # 缓存容量相对于堆的比例 </span> </a> </li> <li class=md-nav__item> <a href=#nessieversionstorepersistcache-capacity-fraction-adjust-mb256-mb class=md-nav__link> <span class=md-ellipsis> nessie.version.store.persist.cache-capacity-fraction-adjust-mb=256 # 缓存容量调整MB </span> </a> </li> <li class=md-nav__item> <a href=#when-having-very-small-heaps-use-the-cache-capacity-fraction-min-size-mb-value-set-to-0-to-disable class=md-nav__link> <span class=md-ellipsis> When having very small heaps, use the cache-capacity-fraction-min-size-mb value. Set to 0 to disable </span> </a> </li> <li class=md-nav__item> <a href=#the-min-cache-capacity class=md-nav__link> <span class=md-ellipsis> the min cache capacity. </span> </a> </li> <li class=md-nav__item> <a href=#nessieversionstorepersistcache-capacity-fraction-min-size-mb64-mb class=md-nav__link> <span class=md-ellipsis> nessie.version.store.persist.cache-capacity-fraction-min-size-mb=64 # 缓存最小容量MB </span> </a> </li> <li class=md-nav__item> <a href=#fixed-size-of-nessies-object-cache-in-mb class=md-nav__link> <span class=md-ellipsis> Fixed size of Nessie's object cache in MB. </span> </a> </li> <li class=md-nav__item> <a href=#settings-this-value-to-0-disables-the-fixed-size-object-cache class=md-nav__link> <span class=md-ellipsis> Settings this value to 0 disables the fixed size object cache. </span> </a> </li> <li class=md-nav__item> <a href=#entirely-disabling-the-cache-is-not-recommended-and-will-negatively-affect-performance_1 class=md-nav__link> <span class=md-ellipsis> Entirely disabling the cache is not recommended and will negatively affect performance. </span> </a> </li> <li class=md-nav__item> <a href=#nessieversionstorepersistcache-capacity-mb0-mb class=md-nav__link> <span class=md-ellipsis> nessie.version.store.persist.cache-capacity-mb=0 # 固定大小的缓存容量MB </span> </a> <nav class=md-nav aria-label="nessie.version.store.persist.cache-capacity-mb=0 # 固定大小的缓存容量MB"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#transactional-database-configuration class=md-nav__link> <span class=md-ellipsis> Transactional database configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#note-nessie-quarkus-server-comes-with-built-in-support-for-postgres-and-mariadb-or-any-database class=md-nav__link> <span class=md-ellipsis> Note: Nessie Quarkus Server comes with built-in support for Postgres and MariaDB, or any database </span> </a> </li> <li class=md-nav__item> <a href=#compatible-with-these class=md-nav__link> <span class=md-ellipsis> compatible with these. </span> </a> </li> <li class=md-nav__item> <a href=#select-the-datasource-to-use-with-the-nessieversionstorepersistjdbcdatasource-property class=md-nav__link> <span class=md-ellipsis> Select the datasource to use with the nessie.version.store.persist.jdbc.datasource property; </span> </a> </li> <li class=md-nav__item> <a href=#the-possible-built-in-values-are-default-deprecated-postgresql-mariadb-mysql-and-h2 class=md-nav__link> <span class=md-ellipsis> The possible built-in values are: "default" (deprecated), "postgresql", "mariadb", "mysql" and "h2". </span> </a> </li> <li class=md-nav__item> <a href=#nessieversionstorepersistjdbcdatasourcedefault class=md-nav__link> <span class=md-ellipsis> nessie.version.store.persist.jdbc.datasource=default # 数据源选择 </span> </a> </li> <li class=md-nav__item> <a href=#default-datasource-configuration-deprecated-use-quarkusdatasourcepostgresql-instead class=md-nav__link> <span class=md-ellipsis> Default datasource configuration (deprecated; use quarkus.datasource.postgresql.* instead): </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourcejdbcurljdbcpostgresqllocalhost5432my_database-url class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/my_database # 数据库URL </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourceusername class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.username= # 数据库用户名 </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourcepassword class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.password= # 数据库密码 </span> </a> </li> <li class=md-nav__item> <a href=#postgres-datasource-configuration class=md-nav__link> <span class=md-ellipsis> Postgres datasource configuration: </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourcepostgresqljdbcurljdbcpostgresqllocalhost5432my_database-postgresqlurl class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.postgresql.jdbc.url=jdbc:postgresql://localhost:5432/my_database # PostgreSQL数据库URL </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourcepostgresqlusername-postgresql class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.postgresql.username= # PostgreSQL数据库用户名 </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourcepostgresqlpassword-postgresql class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.postgresql.password= # PostgreSQL数据库密码 </span> </a> </li> <li class=md-nav__item> <a href=#mariadb-datasource-configuration class=md-nav__link> <span class=md-ellipsis> MariaDB datasource configuration: </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourcemariadbusername-mariadb class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.mariadb.username= # MariaDB数据库用户名 </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourcemariadbpassword-mariadb class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.mariadb.password= # MariaDB数据库密码 </span> </a> </li> <li class=md-nav__item> <a href=#quarkusdatasourcemariadbjdbcurljdbcmariadblocalhost3306my_database-mariadburl class=md-nav__link> <span class=md-ellipsis> quarkus.datasource.mariadb.jdbc.url=jdbc:mariadb://localhost:3306/my_database # MariaDB数据库URL </span> </a> </li> <li class=md-nav__item> <a href=#do-not-remove-or-modify-the-following-as-these-optimization-flags-are-incompatible-with-nessie class=md-nav__link> <span class=md-ellipsis> Do not remove or modify the following, as these optimization flags are incompatible with Nessie; </span> </a> </li> <li class=md-nav__item> <a href=#see-httpsmariadbcomdocsserverconnectprogramming-languagesjavabatch class=md-nav__link> <span class=md-ellipsis> see https://mariadb.com/docs/server/connect/programming-languages/java/batch. </span> </a> </li> <li class=md-nav__item> <a href=#mysql-datasource-configuration class=md-nav__link> <span class=md-ellipsis> MySQL datasource configuration: </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h2 id=_1>组件协作架构</h2> <h3 id=_2>各组件角色</h3> <p>组件 职责 Nessie 存储 Iceberg 表的元数据版本（如分支、提交记录），提供 REST API 接口 MinIO 存储 Iceberg 表的数据文件（Parquet/ORC）和元数据文件（metadata.json） Spark 访问 Nessie REST API 接口 通过 Nessie Catalog 管理元数据版本 Keycloak 对nessie 提供 OpenID 认证 Postgres 用于 nessie , keycloak 数据存储</p> <p>通过 Nessie 的 版本化 Catalog 能力，Spark 可以在 Iceberg 表上实现类似 Git 的分支管理，同时 MinIO 提供低成本存储支持。这种架构适合需要多环境隔离（如开发/生产分支）和协作式数据湖场景。</p> <p>参见 https://blog.csdn.net/biyeshejizhishi/article/details/142349823</p> <p>一、Nessie 核心作用</p> <p>Nessie 是类似 Git 的 分布式数据湖元数据服务，为 Iceberg 提供以下核心能力：</p> <pre><code>版本控制：支持分支（Branch）、标签（Tag）、合并（Merge）等 Git 式操作，记录表结构（Schema）、分区等元数据变更历史。
原子性提交：保证跨多表的元数据变更原子性，避免部分更新导致数据不一致。
全局目录服务：作为 Iceberg Catalog 的统一入口，协调 Spark、Flink、Dremio 等工具访问同一版本元数据。
</code></pre> <h2 id=_3>部署</h2> <h3 id=postgresql-minio>postgresql, minio 略</h3> <h3 id=keycloak>部署Keycloak</h3> <p>docker-compose.yaml</p> <pre><code>version: '3'
services:
  keycloak:
    image: quay.io/keycloak/keycloak:26.1.2
    ports:
      - &quot;8080:8080&quot;
      - &quot;9001:9000&quot;
    environment:
      KC_BOOTSTRAP_ADMIN_USERNAME: admin
      KC_BOOTSTRAP_ADMIN_PASSWORD: admin
      KC_DB: postgres
      KC_DB_URL: jdbc:postgresql://10.0.60.28:15432/keylocak
      KC_DB_USERNAME: keycocak
      KC_DB_PASSWORD: 123456
    command: [
      &quot;start&quot;,
      &quot;--features=token-exchange&quot;,
      &quot;--spi-connections-jpa-quarkus-migration-strategy=update&quot;,
      &quot;--health-enabled=true&quot;,
      &quot;--http-enabled=true&quot;,
      &quot;--hostname-strict=false&quot;
    ]
    healthcheck:
      test: &quot;exec 3&lt;&gt;/dev/tcp/localhost/9000 &amp;&amp; echo -e 'GET /health/ready HTTP/1.1\\r\\nHost: localhost\\r\\nConnection: close\\r\\n\\r\\n' &gt;&amp;3 &amp;&amp; cat &lt;&amp;3 | grep -q '200 OK'&quot;
      interval: 5s
      timeout: 2s
      retries: 15
</code></pre> <p>访问http://localhost:8080创建管理员账号。</p> <h4 id=realm>创建Realm与客户端：</h4> <pre><code>新建Realm（如data-lake），用于隔离数据湖相关配置。
创建客户端（Client）：
    Client ID：nessie-client
    Valid Redirect URIs：http://nessie-server:19120/*（Nessie服务地址）
    Access Type：confidential（需客户端密钥认证）
    生成client-secret并保存。 
配置 Client scopes
 catalog
</code></pre> <h5 id=_4>配置用户与角色：</h5> <pre><code>添加用户（如spark-user），设置密码。
创建角色（如data_engineer、admin），并分配权限（如BRANCH_CREATE）。
为用户分配角色。
</code></pre> <h4 id=keycloak_1>设置keycloak</h4> <p>https://projectnessie.org/guides/keycloak/?h=keycloak#setting-up-keycloak</p> <h5 id=_5>验证</h5> <p>curl http://keycloak:8080/realms/data-lake/protocol/openid-connect/token --resolve keycloak:8080:127.0.0.1 --user nessie-client:KdAo5WeQRrSOMyjJgPQcpUyU6c6cOikq -d 'grant_type=client_credentials' -d 'scope=catalog' </p> <p>token=$(curl http://keycloak:8080/realms/data-lake/protocol/openid-connect/token --resolve keycloak:8080:127.0.0.1 --user nessie-client:QIFul6x1H0jTxInEozVyukGYsHel61B1 -d 'grant_type=client_credentials' -d 'scope=catalog' | jq -r .access_token)</p> <p>curl -v http://127.0.0.1:19120/api/v2/config -H "Authorization: Bearer $token" curl -v http://127.0.0.1:19120/iceberg/v1/config -H "Authorization: Bearer $token"</p> <h3 id=nessis>配置nessis</h3> <p>依赖 postgres minio keycloak</p> <pre><code>version: '3'

services:

  nessie:
    # IMPORTANT: when upgrading Nessie images, make sure to update the spark-sql packages as well
    image: ghcr.io/projectnessie/nessie:0.103.0
    ports:
      # API port
      - &quot;19120:19120&quot;
      # Management port (metrics and health checks)
      - &quot;9000:9000&quot;
    environment:
      # Version store settings.
      # This example uses Postgres as the version store.
      - nessie.version.store.type=JDBC
      - nessie.version.store.persist.jdbc.datasource=postgresql
      - quarkus.datasource.postgresql.jdbc.url=jdbc:postgresql://10.0.60.28:15432/catalog
      - quarkus.datasource.postgresql.username=catalog
      - quarkus.datasource.postgresql.password=catalog
      # AuthN settings.
      # This examples uses Keycloak for authentication.
      - nessie.server.authentication.enabled=true
      - quarkus.oidc.auth-server-url=http://keycloak:8080/realms/data-lake
      - quarkus.oidc.client-id=nessie-client
      - quarkus.oidc.token.issuer=http://keycloak:8080/realms/data-lake
      # Object store settings.
      # This example uses MinIO as the object store.
      - nessie.catalog.default-warehouse=warehouse
      - nessie.catalog.warehouses.warehouse.location=s3://demobucket/
      - nessie.catalog.service.s3.default-options.region=us-east-1
      - nessie.catalog.service.s3.default-options.path-style-access=true
      - nessie.catalog.service.s3.default-options.access-key=urn:nessie-secret:quarkus:nessie.catalog.secrets.access-key
      - nessie.catalog.secrets.access-key.name=minioadmin
      - nessie.catalog.secrets.access-key.secret=minioadmin
      # MinIO endpoint
      - nessie.catalog.service.s3.default-options.endpoint=http://10.0.60.28:9002/
    healthcheck:
      test: &quot;exec 3&lt;&gt;/dev/tcp/localhost/9000 &amp;&amp; echo -e 'GET /q/health HTTP/1.1\\r\\nHost: localhost\\r\\nConnection: close\\r\\n\\r\\n' &gt;&amp;3 &amp;&amp; cat &lt;&amp;3 | grep -q '200 OK'&quot;
      interval: 5s
      timeout: 2s
      retries: 15
    extra_hosts:
      - &quot;keycloak:10.0.60.28&quot;
</code></pre> <p>备注： nessie 对minio进行统一管理, 而不再spark 等client 中指定</p> <p>官网的两处说明: </p> <p>https://projectnessie.org/guides/try-nessie/ NOTE </p> <p>https://projectnessie.org/guides/iceberg-rest/#migrate-an-iceberg-client-configuration</p> <p>退出 http://keycloak:8080/realms/data-lake/account</p> <h3 id=spark-sql>spark-sql</h3> <pre><code>version: '3'
services:
  spark-sql:
    image: apache/spark:3.5.4-java17-python3
    depends_on:
      nessie:
        condition: service_healthy
    stdin_open: true
    tty: true
    ports:
      - &quot;4040-4045:4040-4045&quot;
    healthcheck:
      test: &quot;curl localhost:4040&quot;
      interval: 5s
      retries: 15
    command: [
      /opt/spark/bin/spark-sql,
      --packages, &quot;org.projectnessie.nessie-integrations:nessie-spark-extensions-3.5_2.12:0.99.0,org.apache.iceberg:iceberg-spark-runtime-3.5_2.12:1.6.0,software.amazon.awssdk:bundle:2.28.17,software.amazon.awssdk:url-connection-client:2.28.17&quot;,
      --conf, &quot;spark.sql.extensions=org.projectnessie.spark.extensions.NessieSparkSessionExtensions,org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions&quot;,
      --conf, &quot;spark.sql.catalog.nessie=org.apache.iceberg.spark.SparkCatalog&quot;,
      --conf, &quot;spark.sql.catalog.nessie.type=rest&quot;,
      --conf, &quot;spark.sql.catalog.nessie.uri=http://nessie:19120/iceberg/main&quot;,
      --conf, &quot;spark.sql.catalog.nessie.oauth2-server-uri=http://keycloak:8080/realms/data-lake/protocol/openid-connect/token&quot;,
      --conf, &quot;spark.sql.catalog.nessie.credential=nessie-client:KdAo5WeQRrSOMyjJgPQcpUyU6c6cOikq&quot;,
      --conf, &quot;spark.sql.catalog.nessie.scope=catalog&quot;,
      --conf, &quot;spark.sql.catalogImplementation=in-memory&quot;,
      --conf, &quot;spark.jars.ivy=/tmp/.ivy2&quot;,
    ]
    volumes:
      - ./tmp/:/tmp/.ivy2
    extra_hosts:
      - &quot;nessie:10.0.60.28&quot;
      - &quot;keycloak:10.0.60.28&quot;
</code></pre> <h3 id=nessie-cli>nessie-cli</h3> <pre><code>version: '3'
services:
  nessie-cli:
      image: ghcr.io/projectnessie/nessie-cli:0.103.0
      tty: true
      command: [
        --uri, &quot;http://nessie:19120/api/v2&quot;,
        --client-option, &quot;nessie.enable-api-compatibility-check=false&quot;,
        # Options for the internal Nessie client
        --client-option, &quot;nessie.authentication.type=OAUTH2&quot;,
        --client-option, &quot;nessie.authentication.oauth2.issuer-url=http://keycloak:8080/realms/data-lake&quot;,
        --client-option, &quot;nessie.authentication.oauth2.client-id=nessie-client&quot;,
        --client-option, &quot;nessie.authentication.oauth2.client-secret=KdAo5WeQRrSOMyjJgPQcpUyU6c6cOikq&quot;,
        --client-option, &quot;nessie.authentication.oauth2.client-scopes=catalog sign&quot;,
        # Options for the internal Iceberg REST client
        #--client-option, &quot;uri=http://nessie:19120/iceberg/main&quot;,
        #--client-option, &quot;oauth2-server-uri=http://keycloak:8080/realms/iceberg/protocol/openid-connect/token&quot;,
        #--client-option, &quot;credential=nessie-client:KdAo5WeQRrSOMyjJgPQcpUyU6c6cOikq&quot;,
        #--client-option, &quot;scope=catalog&quot;,
      ]
      extra_hosts:
       - &quot;nessie:10.0.60.28&quot;
       - &quot;keycloak:10.0.60.28&quot;
</code></pre> <p>配置可以成功创建连接，但是执行命令一直卡、 用下面的方式</p> <p>CONNECT TO 'http://nessie:19120/iceberg/main' USING nessie.ref = 'main' AND nessie.authentication.type = 'OAUTH2' AND nessie.authentication.oauth2.client-id = 'nessie-client' AND nessie.authentication.oauth2.client-secret = 'KdAo5WeQRrSOMyjJgPQcpUyU6c6cOikq' AND nessie.authentication.oauth2.token-endpoint = 'http://keycloak:8080/realms/data-lake/protocol/openid-connect/token';</p> <p>CONNECT TO 'http://10.1.50.200:19120/api/v2' USING nessie.ref = 'main' AND nessie.authentication.type = 'OAUTH2' AND nessie.authentication.oauth2.client-id = 'nessie-client' AND nessie.authentication.oauth2.client-secret = 'KdAo5WeQRrSOMyjJgPQcpUyU6c6cOikq' AND nessie.authentication.oauth2.token-endpoint = 'http://10.1.50.201:8080/realms/data-lake/protocol/openid-connect/token';</p> <h4 id=nessie>nessie 配置 附录</h4> <p>```properties</p> <h1 id=_6></h1> <h1 id=copyright-c-2020-dremio>Copyright (C) 2020 Dremio</h1> <h1 id=_7></h1> <h1 id=licensed-under-the-apache-license-version-20-the-license>Licensed under the Apache License, Version 2.0 (the "License");</h1> <h1 id=you-may-not-use-this-file-except-in-compliance-with-the-license>you may not use this file except in compliance with the License.</h1> <h1 id=you-may-obtain-a-copy-of-the-license-at>You may obtain a copy of the License at</h1> <h1 id=_8></h1> <h1 id=httpwwwapacheorglicenseslicense-20>http://www.apache.org/licenses/LICENSE-2.0</h1> <h1 id=_9></h1> <h1 id=unless-required-by-applicable-law-or-agreed-to-in-writing-software>Unless required by applicable law or agreed to in writing, software</h1> <h1 id=distributed-under-the-license-is-distributed-on-an-as-is-basis>distributed under the License is distributed on an "AS IS" BASIS,</h1> <h1 id=without-warranties-or-conditions-of-any-kind-either-express-or-implied>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</h1> <h1 id=see-the-license-for-the-specific-language-governing-permissions-and>See the License for the specific language governing permissions and</h1> <h1 id=limitations-under-the-license>limitations under the License.</h1> <h1 id=_10></h1> <h1 id=nessie-settings>Nessie settings</h1> <h3 id=default-base-branch-name>default base branch name</h3> <p>nessie.server.default-branch=main # 设置默认的基础分支名称为“main” nessie.server.send-stacktrace-to-client=false # 是否将堆栈跟踪发送给客户端，默认为false</p> <h1 id=to-provide-secrets-via-a-keystore-via-quarkus-the-following-configuration>To provide secrets via a keystore via Quarkus, the following configuration</h1> <h1 id=options-need-to-be-configured-accordingly>options need to be configured accordingly.</h1> <h1 id=for-details-see-httpsquarkusioguidesconfig-secretsstore-secrets-in-a-keystore>For details see https://quarkus.io/guides/config-secrets#store-secrets-in-a-keystore</h1> <h1 id=smallryeconfigsourcekeystorepropertiespathproperties-keystore>smallrye.config.source.keystore."properties".path=properties # keystore的路径</h1> <h1 id=smallryeconfigsourcekeystorepropertiespasswordarealpassword-keystore>smallrye.config.source.keystore."properties".password=arealpassword # keystore的密码</h1> <h1 id=smallryeconfigsourcekeystorepropertieshandleraes-gcm-nopadding-keystore>smallrye.config.source.keystore."properties".handler=aes-gcm-nopadding # keystore的处理方式</h1> <h1 id=smallryeconfigsourcekeystorekeypathkey>smallrye.config.source.keystore."key".path=key # 密钥的路径</h1> <h1 id=smallryeconfigsourcekeystorekeypasswordanotherpassword>smallrye.config.source.keystore."key".password=anotherpassword # 密钥的密码</h1> <h1 id=reverse-proxy-settings>Reverse Proxy Settings</h1> <h1 id=_11></h1> <h1 id=these-config-options-are-mentioned-only-for-documentation-purposes-consult-the>These config options are mentioned only for documentation purposes. Consult the</h1> <h1 id=quarkus-documentation-for-running-behind-a-reverse-proxy-and-configure-those>Quarkus documentation for "Running behind a reverse proxy" and configure those</h1> <h1 id=depending-on-your-actual-needs>depending on your actual needs.</h1> <h1 id=_12></h1> <h1 id=see-httpsquarkusioguideshttp-referencereverse-proxy>See https://quarkus.io/guides/http-reference#reverse-proxy</h1> <h1 id=_13></h1> <h1 id=do-not-enable-these-option-unless-your-reverse-proxy-for-example-istio-or-nginx>Do NOT enable these option unless your reverse proxy (for example istio or nginx)</h1> <h1 id=is-properly-setup-to-set-these-headers-but-also-filter-those-from-incoming-requests>is properly setup to set these headers but also filter those from incoming requests.</h1> <h1 id=_14></h1> <h1 id=quarkushttpproxyproxy-address-forwardingtrue>quarkus.http.proxy.proxy-address-forwarding=true # 代理地址转发</h1> <h1 id=quarkushttpproxyallow-x-forwardedtrue-x-forwarded>quarkus.http.proxy.allow-x-forwarded=true # 允许X-Forwarded头</h1> <h1 id=quarkushttpproxyenable-forwarded-hosttrue-forwarded-host>quarkus.http.proxy.enable-forwarded-host=true # 启用Forwarded-Host头</h1> <h1 id=quarkushttpproxyenable-forwarded-prefixtrue-forwarded-prefix>quarkus.http.proxy.enable-forwarded-prefix=true # 启用Forwarded-Prefix头</h1> <h1 id=quarkushttpproxytrusted-proxies127001>quarkus.http.proxy.trusted-proxies=127.0.0.1 # 信任的代理列表</h1> <h1 id=support-for-external-secrets-managers-see-http1270018000nessie-latestconfigurationsecrets-manager-settings>Support for external secrets managers - see http://127.0.0.1:8000/nessie-latest/configuration/#secrets-manager-settings</h1> <h1 id=_15></h1> <h1 id=nessiesecretstype>nessie.secrets.type= # 外部密钥管理器类型</h1> <h1 id=vault-hashicorp-vault-see-httpsdocsquarkiverseioquarkus-vaultdevindexhtmlconfiguration-reference>VAULT: Hashicorp Vault. See https://docs.quarkiverse.io/quarkus-vault/dev/index.html#configuration-reference</h1> <h1 id=for-the-quarkus-docs-for-hashicorp-vault-for-specific-information>for the Quarkus docs for Hashicorp Vault for specific information.</h1> <h1 id=amazon-aws-secrets-manager-see-httpsdocsquarkiverseioquarkus-amazon-servicesdevamazon-secretsmanagerhtml_configuration_reference>AMAZON: AWS Secrets Manager. See https://docs.quarkiverse.io/quarkus-amazon-services/dev/amazon-secretsmanager.html#_configuration_reference</h1> <h1 id=for-the-quarkus-docs-for-amazon-services-secrets-manager-for-specific-information>for the Quarkus docs for Amazon Services / Secrets Manager for specific information.</h1> <h1 id=azure-aws-secrets-manager-not-supported-yet>AZURE: AWS Secrets Manager. NOT SUPPORTED YET!</h1> <h1 id=see-httpsdocsquarkiverseioquarkus-azure-servicesdevquarkus-azure-key-vaulthtml_extension_configuration_reference>See https://docs.quarkiverse.io/quarkus-azure-services/dev/quarkus-azure-key-vault.html#_extension_configuration_reference</h1> <h1 id=for-the-quarkus-docs-for-azure-key-vault>for the Quarkus docs for Azure Key Vault</h1> <h1 id=google-google-cloud-secrets-manager-not-supported-yet>GOOGLE: Google Cloud Secrets Manager. NOT SUPPORTED YET!</h1> <h1 id=nessiesecretscachemax-elements1000>nessie.secrets.cache.max-elements=1000 # 密钥缓存的最大元素数量</h1> <h1 id=nessiesecretscachettlpt15m-ttl>nessie.secrets.cache.ttl=PT15M # 密钥缓存的TTL（存活时间）</h1> <h1 id=_16></h1> <h1 id=when-using-google-cloud-secret-manager-you-may-have-to-configure-this-to-true>When using Google Cloud Secret Manager you may have to configure this to 'true'</h1> <p>quarkus.google.cloud.enable-metadata-server=false # 是否启用Google Cloud元数据服务器</p> <h1 id=to-enable-a-specific-secrets-manager-consult-the-documentations-for-those-more>To enable a specific secrets manager consult the documentations for those, more</h1> <h1 id=information-here-httpsprojectnessieorgnessie-latestconfigurationsecrets-manager-settings>information here: https://projectnessie.org/nessie-latest/configuration/#secrets-manager-settings</h1> <h5 id=nessie-catalog>Nessie Catalog</h5> <h1 id=optional-validate-that-referenced-secrets-exist-default-is-false>Optional: validate that referenced secrets exist (default is false)</h1> <h1 id=nessiecatalogvalidate-secretstrue>nessie.catalog.validate-secrets=true # 验证引用的秘密是否存在</h1> <h1 id=optional-disable-health-check-for-object-stores-default-is-true>Optional: disable health check for object stores (default is true)</h1> <h1 id=nessiecatalogobject-storeshealth-checkenabledfalse>nessie.catalog.object-stores.health-check.enabled=false # 禁用对象存储的健康检查</h1> <h1 id=iceberg-default-config-can-be-overridden-per-warehouse>Iceberg default config (can be overridden per warehouse)</h1> <h1 id=nessiecatalogiceberg-config-defaultspropvalue-iceberg>nessie.catalog.iceberg-config-defaults.prop=value # Iceberg默认配置</h1> <h1 id=nessiecatalogiceberg-config-overridespropvalue-iceberg>nessie.catalog.iceberg-config-overrides.prop=value # Iceberg配置覆盖</h1> <h1 id=warehouses>Warehouses</h1> <h1 id=default-warehouse>default warehouse</h1> <h1 id=nessiecatalogdefault-warehousewarehouse>nessie.catalog.default-warehouse=warehouse # 默认仓库</h1> <h1 id=nessiecatalogwarehouseswarehouselocation>nessie.catalog.warehouses.warehouse.location=<object-store-uri> # 仓库位置</h1> <h1 id=nessiecatalogwarehouseswarehouseiceberg-config-defaultsprop-nameprop-value-iceberg>nessie.catalog.warehouses.warehouse.iceberg-config-defaults.prop-name=prop-value # 仓库的Iceberg默认配置</h1> <h1 id=nessiecatalogwarehouseswarehouseiceberg-config-overridesprop-nameprop-value-iceberg>nessie.catalog.warehouses.warehouse.iceberg-config-overrides.prop-name=prop-value # 仓库的Iceberg配置覆盖</h1> <h1 id=additional-warehouses>additional warehouses</h1> <h1 id=nessiecatalogwarehousesanother-warehouselocation>nessie.catalog.warehouses.another-warehouse.location=<object-store-uri> # 额外仓库的位置</h1> <h1 id=s3-settings>S3 settings</h1> <h1 id=default-s3-settings>default S3 settings</h1> <h1 id=nessiecatalogservices3default-optionsendpointhttplocalhost9000-s3>nessie.catalog.service.s3.default-options.endpoint=http://localhost:9000 # 默认S3设置的端点</h1> <h1 id=nessiecatalogservices3default-optionspath-style-accessfalse>nessie.catalog.service.s3.default-options.path-style-access=false # 路径样式访问</h1> <h1 id=nessiecatalogservices3default-optionsregionus-west-2>nessie.catalog.service.s3.default-options.region=us-west-2 # 区域设置</h1> <h1 id=nessiecatalogservices3default-optionsaccess-keyurnnessie-secretquarkusmy-secretss3-default>nessie.catalog.service.s3.default-options.access-key=urn:nessie-secret:quarkus:my-secrets.s3-default # 访问密钥</h1> <h1 id=my-secretss3-defaultnameawsaccesskeyid>my-secrets.s3-default.name=awsAccessKeyId # 密钥名称</h1> <h1 id=my-secretss3-defaultsecretawssecretaccesskey>my-secrets.s3-default.secret=awsSecretAccessKey # 密钥内容</h1> <h1 id=per-bucket-s3-settings>per-bucket S3 settings</h1> <h1 id=nessiecatalogservices3bucketsbucket1endpoints3abucket1>nessie.catalog.service.s3.buckets.bucket1.endpoint=s3a://bucket1 # 每个桶的设置</h1> <h1 id=nessiecatalogservices3bucketsbucket1access-keyurnnessie-secretquarkusmy-secretss3-bucket>nessie.catalog.service.s3.buckets.bucket1.access-key=urn:nessie-secret:quarkus:my-secrets.s3-bucket # 桶的访问密钥</h1> <h1 id=nessiecatalogservices3bucketsbucket1regionus-east-1>nessie.catalog.service.s3.buckets.bucket1.region=us-east-1 # 桶的区域</h1> <h1 id=my-secretss3-bucketnameawsaccesskeyid1>my-secrets.s3-bucket.name=awsAccessKeyId1 # 桶的密钥名称</h1> <h1 id=my-secretss3-bucketsecretawssecretaccesskey1>my-secrets.s3-bucket.secret=awsSecretAccessKey1 # 桶的密钥内容</h1> <h1 id=gcs-settings>GCS settings</h1> <h1 id=nessiecatalogservicegcsdefault-optionshosthttplocalhost4443-gcs>nessie.catalog.service.gcs.default-options.host=http://localhost:4443 # GCS默认设置的主机</h1> <h1 id=nessiecatalogservicegcsdefault-optionsproject-idnessie-gcsid>nessie.catalog.service.gcs.default-options.project-id=nessie # GCS默认设置的项目ID</h1> <h1 id=nessiecatalogservicegcsdefault-optionsauth-typeaccess_token-gcs>nessie.catalog.service.gcs.default-options.auth-type=access_token # GCS默认设置的授权类型</h1> <h1 id=nessiecatalogservicegcsdefault-optionsoauth2-tokenurnnessie-secretquarkusmy-secretsgcs-default-gcsoauth2>nessie.catalog.service.gcs.default-options.oauth2-token=urn:nessie-secret:quarkus:my-secrets.gcs-default # GCS默认设置的OAuth2令牌</h1> <h1 id=my-secretsgcs-defaulttokentokenref-gcs>my-secrets.gcs-default.token=tokenRef # GCS默认设置的令牌引用</h1> <h1 id=per-bucket-gcs-settings>per-bucket GCS settings</h1> <h1 id=nessiecatalogservicegcsbucketsbucket1hosthttplocalhost4443>nessie.catalog.service.gcs.buckets.bucket1.host=http://localhost:4443 # 每个桶的主机</h1> <h1 id=nessiecatalogservicegcsbucketsbucket1project-idnessie-id>nessie.catalog.service.gcs.buckets.bucket1.project-id=nessie # 每个桶的项目ID</h1> <h1 id=nessiecatalogservicegcsbucketsbucket1auth-typeaccess_token>nessie.catalog.service.gcs.buckets.bucket1.auth-type=access_token # 每个桶的授权类型</h1> <h1 id=nessiecatalogservicegcsbucketsbucket1oauth2-tokenurnnessie-secretquarkusmy-secretsgcs-bucket-oauth2>nessie.catalog.service.gcs.buckets.bucket1.oauth2-token=urn:nessie-secret:quarkus:my-secrets.gcs-bucket # 每个桶的OAuth2令牌</h1> <h1 id=my-secretsgcs-buckettokentokenref>my-secrets.gcs-bucket.token=tokenRef # 每个桶的令牌引用</h1> <h1 id=adls-settings>ADLS settings</h1> <h1 id=nessiecatalogserviceadlsdefault-optionsendpointhttplocalhostadlsgen2bucket-adls>nessie.catalog.service.adls.default-options.endpoint=http://localhost/adlsgen2/bucket # ADLS默认设置的端点</h1> <h1 id=nessiecatalogserviceadlsdefault-optionsauth-typenone-adls>nessie.catalog.service.adls.default-options.auth-type=none # ADLS默认设置的授权类型</h1> <h1 id=nessiecatalogserviceadlsdefault-optionsaccounturnnessie-secretquarkusmy-secretsadls-default-adls>nessie.catalog.service.adls.default-options.account=urn:nessie-secret:quarkus:my-secrets.adls-default # ADLS默认设置的账户</h1> <h1 id=nessiecatalogserviceadlsdefault-optionsconfigurationpropnamepropvalue-adls>nessie.catalog.service.adls.default-options.configuration.propname=propvalue # ADLS默认设置的配置</h1> <h1 id=my-secretsadls-defaultnameaccount-adls>my-secrets.adls-default.name=account # ADLS默认设置的账户名称</h1> <h1 id=my-secretsadls-defaultsecretsecret-adls>my-secrets.adls-default.secret=secret # ADLS默认设置的密钥</h1> <h1 id=per-file-system-adls-settings>per-file-system ADLS settings</h1> <h1 id=nessiecatalogserviceadlsfile-systemsbucket1endpointhttplocalhostadlsgen2bucket>nessie.catalog.service.adls.file-systems.bucket1.endpoint=http://localhost/adlsgen2/bucket # 每个文件系统的端点</h1> <h1 id=nessiecatalogserviceadlsfile-systemsbucket1auth-typenone>nessie.catalog.service.adls.file-systems.bucket1.auth-type=none # 每个文件系统的授权类型</h1> <h1 id=nessiecatalogserviceadlsfile-systemsbucket1accounturnnessie-secretquarkusmy-secretsadls-fs>nessie.catalog.service.adls.file-systems.bucket1.account=urn:nessie-secret:quarkus:my-secrets.adls-fs # 每个文件系统的账户</h1> <h1 id=nessiecatalogserviceadlsfile-systemsbucket1configurationpropnamepropvalue>nessie.catalog.service.adls.file-systems.bucket1.configuration.propname=propvalue # 每个文件系统的配置</h1> <h1 id=my-secretsadls-fsnameaccount>my-secrets.adls-fs.name=account # 每个文件系统的账户名称</h1> <h1 id=my-secretsadls-fssecretsecret>my-secrets.adls-fs.secret=secret # 每个文件系统的密钥</h1> <h2 id=nessie-authorization-settings>Nessie authorization settings</h2> <h3 id=this-will-perform-authorization-on-branchestags-and-content-where-rule-definitions-are>This will perform authorization on branches/tags and content where rule definitions are</h3> <h3 id=using-a-common-expression-language-cel-expression-an-intro-to-cel-can-be-found-at-httpsgithubcomgooglecel-specblobmasterdocintromd>using a Common Expression Language (CEL) expression (an intro to CEL can be found at https://github.com/google/cel-spec/blob/master/doc/intro.md).</h3> <h3 id=rule-definitions-are-of-the-form-nessieserverauthorizationrules>Rule definitions are of the form nessie.server.authorization.rules.<ruleid>=<rule_expression></h3> <h3 id=available-variables-within-the-are-op-role-ref-path>Available variables within the <rule_expression> are: 'op' / 'role' / 'ref' / 'path'</h3> <h3 id=the-op-variable-in-the-can-be-any-of>The 'op' variable in the <rule_expression> can be any of:</h3> <h3 id=view_reference-create_reference-delete_reference-read_entries-read_content_key-list_commit_log>'VIEW_REFERENCE', 'CREATE_REFERENCE', 'DELETE_REFERENCE', 'READ_ENTRIES', 'READ_CONTENT_KEY', 'LIST_COMMIT_LOG',</h3> <h3 id=commit_change_against_reference-assign_reference_to_hash-update_entity-read_entity_value-delete_entity-view_reflog>'COMMIT_CHANGE_AGAINST_REFERENCE', 'ASSIGN_REFERENCE_TO_HASH', 'UPDATE_ENTITY', 'READ_ENTITY_VALUE', 'DELETE_ENTITY', 'VIEW_REFLOG'</h3> <h3 id=the-role-refers-to-the-users-role-and-can-be-any-string>The 'role' refers to the user's role and can be any string</h3> <h3 id=the-ref-refers-to-a-string-representing-a-branchtag-name>The 'ref' refers to a string representing a branch/tag name</h3> <h3 id=the-path-refers-to-the-key-for-the-content-of-an-object-and-can-be-any-string>The 'path' refers to the Key for the content of an object and can be any string</h3> <h3 id=some-use-case-based-example-rules-are-shown-below-in-practice-you-might-rather-create-a-single-rule-that-allows-eg-branch-creationdeletioncommits>Some "use-case-based" example rules are shown below (in practice you might rather create a single rule that allows e.g. branch creation/deletion/commits/...):</h3> <h1 id=nessieserverauthorizationenabledfalse>nessie.server.authorization.enabled=false # 是否启用授权</h1> <h1 id=nessieserverauthorizationtypecel-cel>nessie.server.authorization.type=CEL # 授权类型为CEL</h1> <p># nessie.server.authorization.rules.allow_branch_listing=\</p> <h1 id=opview_reference-rolestartswithtest_user-refstartswithallowedbranch>op=='VIEW_REFERENCE' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许分支列表查看规则</h1> <p># nessie.server.authorization.rules.allow_branch_creation=\</p> <h1 id=opcreate_reference-rolestartswithtest_user-refstartswithallowedbranch>op=='CREATE_REFERENCE' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许分支创建规则</h1> <p># nessie.server.authorization.rules.allow_branch_deletion=\</p> <h1 id=opdelete_reference-rolestartswithtest_user-refstartswithallowedbranch>op=='DELETE_REFERENCE' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许分支删除规则</h1> <p># nessie.server.authorization.rules.allow_listing_commitlog=\</p> <h1 id=oplist_commit_log-rolestartswithtest_user-refstartswithallowedbranch>op=='LIST_COMMIT_LOG' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许提交日志列表规则</h1> <p># nessie.server.authorization.rules.allow_entries_reading=\</p> <h1 id=opread_entries-rolestartswithtest_user-refstartswithallowedbranch>op=='READ_ENTRIES' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许条目读取规则</h1> <p># nessie.server.authorization.rules.allow_assigning_ref_to_hash=\</p> <h1 id=opassign_reference_to_hash-rolestartswithtest_user-refstartswithallowedbranch>op=='ASSIGN_REFERENCE_TO_HASH' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许分配引用到哈希规则</h1> <p># nessie.server.authorization.rules.allow_commits=\</p> <h1 id=opcommit_change_against_reference-rolestartswithtest_user-refstartswithallowedbranch>op=='COMMIT_CHANGE_AGAINST_REFERENCE' &amp;&amp; role.startsWith('test_user') &amp;&amp; ref.startsWith('allowedBranch') # 允许提交规则</h1> <p># nessie.server.authorization.rules.allow_reading_entity_value=\</p> <h1 id=opread_entity_value-roletest_user-pathstartswithallowed>op=='READ_ENTITY_VALUE' &amp;&amp; role=='test_user' &amp;&amp; path.startsWith('allowed.') # 允许读取实体值规则</h1> <p># nessie.server.authorization.rules.allow_updating_entity=\</p> <h1 id=opupdate_entity-roletest_user-pathstartswithallowed>op=='UPDATE_ENTITY' &amp;&amp; role=='test_user' &amp;&amp; path.startsWith('allowed.') # 允许更新实体规则</h1> <p># nessie.server.authorization.rules.allow_deleting_entity=\</p> <h1 id=opdelete_entity-roletest_user-pathstartswithallowed>op=='DELETE_ENTITY' &amp;&amp; role=='test_user' &amp;&amp; path.startsWith('allowed.') # 允许删除实体规则</h1> <p># nessie.server.authorization.rules.allow_commits_without_entity_changes=\</p> <h1 id=opcommit_change_against_reference-roletest_user2-refstartswithallowedbranch>op=='COMMIT_CHANGE_AGAINST_REFERENCE' &amp;&amp; role=='test_user2' &amp;&amp; ref.startsWith('allowedBranch') # 允许没有实体更改的提交规则</h1> <p># nessie.server.authorization.rules.allow_all=\ # op in ['VIEW_REFERENCE','CREATE_REFERENCE','DELETE_REFERENCE','LIST_COMMITLOG','READ_ENTRIES','LIST_COMMIT_LOG',\ # 'COMMIT_CHANGE_AGAINST_REFERENCE','ASSIGN_REFERENCE_TO_HASH','UPDATE_ENTITY','READ_ENTITY_VALUE','DELETE_ENTITY'] \</p> <h1 id=roleadmin_user>&amp;&amp; role=='admin_user' # 允许所有操作规则</h1> <p># nessie.server.authorization.rules.allow_listing_reflog=\</p> <h1 id=opview_reflog-roleadmin_user>op=='VIEW_REFLOG' &amp;&amp; role=='admin_user' # 允许查看引用日志规则</h1> <h3 id=which-type-of-version-store-to-use-in_memory-rocksdb-dynamodb2-mongodb2-cassandra2-jdbc2-bigtable>which type of version store to use: IN_MEMORY, ROCKSDB, DYNAMODB2, MONGODB2, CASSANDRA2, JDBC2, BIGTABLE.</h3> <h1 id=note-the-version-store-type-jdbc-is-deprecated-please-use-the-nessie-server-admin-tool-to-migrate-to-jdbc2>Note: the version store type JDBC is deprecated, please use the Nessie Server Admin Tool to migrate to JDBC2.</h1> <h1 id=note-the-version-store-type-cassandra-is-deprecated-please-use-the-nessie-server-admin-tool-to-migrate-to-cassandra2>Note: the version store type CASSANDRA is deprecated, please use the Nessie Server Admin Tool to migrate to CASSANDRA2.</h1> <h1 id=note-the-version-store-type-dynamodb-is-deprecated-please-use-the-nessie-server-admin-tool-to-migrate-to-dynamodb2>Note: the version store type DYNAMODB is deprecated, please use the Nessie Server Admin Tool to migrate to DYNAMODB2.</h1> <h1 id=note-the-version-store-type-mongodb-is-deprecated-please-use-the-nessie-server-admin-tool-to-migrate-to-mongodb2>Note: the version store type MONGODB is deprecated, please use the Nessie Server Admin Tool to migrate to MONGODB2.</h1> <p>nessie.version.store.type=IN_MEMORY # 使用的版本存储类型</p> <h1 id=object-cache-size-as-a-value-relative-to-the-jvms-max-heap-size-the-cache-capacity-fraction-adjust-mb>Object cache size as a value relative to the JVM's max heap size. The <code>cache-capacity-fraction-adjust-mb</code></h1> <h1 id=value-will-be-kept-free-when-calculating-the-effective-cache-size-set-cache-capacity-fraction-of-heap>value will be "kept free" when calculating the effective cache size. Set <code>cache-capacity-fraction-of-heap</code></h1> <h1 id=to-0-to-use-a-fixed-size>to 0 to use a fixed size.</h1> <h1 id=entirely-disabling-the-cache-is-not-recommended-and-will-negatively-affect-performance>Entirely disabling the cache is not recommended and will negatively affect performance.</h1> <h1 id=nessieversionstorepersistcache-capacity-fraction-of-heap07>nessie.version.store.persist.cache-capacity-fraction-of-heap=0.7 # 缓存容量相对于堆的比例</h1> <h1 id=nessieversionstorepersistcache-capacity-fraction-adjust-mb256-mb>nessie.version.store.persist.cache-capacity-fraction-adjust-mb=256 # 缓存容量调整MB</h1> <h1 id=when-having-very-small-heaps-use-the-cache-capacity-fraction-min-size-mb-value-set-to-0-to-disable>When having very small heaps, use the <code>cache-capacity-fraction-min-size-mb</code> value. Set to <code>0</code> to disable</h1> <h1 id=the-min-cache-capacity>the min cache capacity.</h1> <h1 id=nessieversionstorepersistcache-capacity-fraction-min-size-mb64-mb>nessie.version.store.persist.cache-capacity-fraction-min-size-mb=64 # 缓存最小容量MB</h1> <h1 id=fixed-size-of-nessies-object-cache-in-mb>Fixed size of Nessie's object cache in MB.</h1> <h1 id=settings-this-value-to-0-disables-the-fixed-size-object-cache>Settings this value to 0 disables the fixed size object cache.</h1> <h1 id=entirely-disabling-the-cache-is-not-recommended-and-will-negatively-affect-performance_1>Entirely disabling the cache is not recommended and will negatively affect performance.</h1> <h1 id=nessieversionstorepersistcache-capacity-mb0-mb>nessie.version.store.persist.cache-capacity-mb=0 # 固定大小的缓存容量MB</h1> <h2 id=transactional-database-configuration>Transactional database configuration</h2> <h1 id=note-nessie-quarkus-server-comes-with-built-in-support-for-postgres-and-mariadb-or-any-database>Note: Nessie Quarkus Server comes with built-in support for Postgres and MariaDB, or any database</h1> <h1 id=compatible-with-these>compatible with these.</h1> <h1 id=select-the-datasource-to-use-with-the-nessieversionstorepersistjdbcdatasource-property>Select the datasource to use with the <code>nessie.version.store.persist.jdbc.datasource</code> property;</h1> <h1 id=the-possible-built-in-values-are-default-deprecated-postgresql-mariadb-mysql-and-h2>The possible built-in values are: "default" (deprecated), "postgresql", "mariadb", "mysql" and "h2".</h1> <h1 id=nessieversionstorepersistjdbcdatasourcedefault>nessie.version.store.persist.jdbc.datasource=default # 数据源选择</h1> <h1 id=default-datasource-configuration-deprecated-use-quarkusdatasourcepostgresql-instead>Default datasource configuration (deprecated; use quarkus.datasource.postgresql.* instead):</h1> <p>quarkus.datasource.db-kind=postgresql # 数据库类型为PostgreSQL quarkus.datasource.active=false # 数据源是否激活 quarkus.datasource.devservices.enabled=false # 是否启用开发服务</p> <h1 id=quarkusdatasourcejdbcurljdbcpostgresqllocalhost5432my_database-url>quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/my_database # 数据库URL</h1> <h1 id=quarkusdatasourceusername>quarkus.datasource.username=<your username> # 数据库用户名</h1> <h1 id=quarkusdatasourcepassword>quarkus.datasource.password=<your password> # 数据库密码</h1> <h1 id=postgres-datasource-configuration>Postgres datasource configuration:</h1> <p>quarkus.datasource.postgresql.db-kind=postgresql # PostgreSQL数据源的数据库类型 quarkus.datasource.postgresql.active=false # PostgreSQL数据源是否激活 quarkus.datasource.postgresql.devservices.enabled=false # 是否启用PostgreSQL开发服务</p> <h1 id=quarkusdatasourcepostgresqljdbcurljdbcpostgresqllocalhost5432my_database-postgresqlurl>quarkus.datasource.postgresql.jdbc.url=jdbc:postgresql://localhost:5432/my_database # PostgreSQL数据库URL</h1> <h1 id=quarkusdatasourcepostgresqlusername-postgresql>quarkus.datasource.postgresql.username=<your username> # PostgreSQL数据库用户名</h1> <h1 id=quarkusdatasourcepostgresqlpassword-postgresql>quarkus.datasource.postgresql.password=<your password> # PostgreSQL数据库密码</h1> <h1 id=mariadb-datasource-configuration>MariaDB datasource configuration:</h1> <p>quarkus.datasource.mariadb.db-kind=mariadb # MariaDB数据源的数据库类型 quarkus.datasource.mariadb.active=false # MariaDB数据源是否激活 quarkus.datasource.mariadb.devservices.enabled=false # 是否启用MariaDB开发服务</p> <h1 id=quarkusdatasourcemariadbusername-mariadb>quarkus.datasource.mariadb.username=<your username> # MariaDB数据库用户名</h1> <h1 id=quarkusdatasourcemariadbpassword-mariadb>quarkus.datasource.mariadb.password=<your password> # MariaDB数据库密码</h1> <h1 id=quarkusdatasourcemariadbjdbcurljdbcmariadblocalhost3306my_database-mariadburl>quarkus.datasource.mariadb.jdbc.url=jdbc:mariadb://localhost:3306/my_database # MariaDB数据库URL</h1> <h1 id=do-not-remove-or-modify-the-following-as-these-optimization-flags-are-incompatible-with-nessie>Do not remove or modify the following, as these optimization flags are incompatible with Nessie;</h1> <h1 id=see-httpsmariadbcomdocsserverconnectprogramming-languagesjavabatch>see https://mariadb.com/docs/server/connect/programming-languages/java/batch.</h1> <p>quarkus.datasource.mariadb.jdbc.additional-jdbc-properties.useBulkStmts=false # 禁用批量语句 quarkus.datasource.mariadb.jdbc.additional-jdbc-properties.useBulkStmtsForInserts=false # 禁用批量插入</p> <h1 id=mysql-datasource-configuration>MySQL datasource configuration:</h1> <p>quarkus.datasource.mysql.db-kind=mariadb # MySQL数据源的数据库类型 quarkus.datasource.mysql.active=false # MySQL数据源是否激活 quarkus.datasource.mysql.devservices.enabled=false #</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2026 | Eamon </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.indexes", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.d7c377c4.min.js></script> <script src=../../custom-js/custom-js.js></script> <script src=../../redirect-md.js></script> </body> </html>